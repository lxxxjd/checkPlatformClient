(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[42],{vgoz:function(e,t,a){"use strict";a.r(t);a("IzEo");var r,n,i,o,s=a("bx4M"),l=(a("giR+"),a("fyUT")),c=(a("14J3"),a("BMrR")),u=(a("Pwec"),a("CtXQ")),p=(a("jCWc"),a("kPKH")),m=(a("+L6B"),a("2/Rp")),d=(a("7Kak"),a("9yH6")),g=a("p0pE"),h=a.n(g),f=(a("2qtc"),a("kLXV")),y=a("eHn4"),v=a.n(y),w=(a("/xke"),a("TeRw")),E=a("2Taf"),F=a.n(E),b=a("vZ4D"),k=a.n(b),I=a("l4Ni"),S=a.n(I),q=a("ujKo"),V=a.n(q),C=a("MhPg"),P=a.n(C),N=(a("5NDa"),a("5rEg")),x=(a("OaEy"),a("2fM7")),R=(a("y8nQ"),a("Vl3Y")),M=a("q1tI"),O=a.n(M),j=a("MuoO"),D=a("3a4m"),T=a.n(D),A=a("zHco");a("UNh3");function H(e){return function(){var t,a=V()(e);if(J()){var r=V()(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return S()(this,t)}}function J(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}R["a"].Item,x["a"].Option;var L=N["a"].TextArea,Q=(r=Object(j["connect"])(function(e){var t=e.charge,a=e.loading;return{charge:t,loading:a.models.charge}}),n=R["a"].create(),r(i=n((o=function(e){P()(a,e);var t=H(a);function a(){var e;F()(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),e.state={formValues:{},value:"\u6309\u5355\u4ef7",checkProject:[],priceway:""},e.back=function(){window.history.back()},e.onChange=function(t){e.setState({value:t.target.value});var a=e.props,r=a.form,n=a.dispatch;r.resetFields();var i=sessionStorage.getItem("reportno");t.target.value===e.state.priceway&&n({type:"charge/getPriceMaking",payload:{reportNo:i},callback:function(t){200===t.code?null!=t.data&&(e.setState({value:t.data.priceway.trim()}),r.setFieldsValue({total:t.data.total}),"\u6309\u5355\u4ef7"===t.data.priceway.trim()&&r.setFieldsValue({choose:t.data.choose.trim(),price:parseFloat(t.data.price.trim()),quantity:parseFloat(t.data.quantity.trim())})):w["a"].open({message:"\u83b7\u53d6\u5931\u8d25",description:t.data})}})},e.sumQuanlity=function(t){var a=e.props.form,r=a.getFieldValue("price"),n=t;if(void 0!==n&&""!==n&&""!==r&&void 0!==r){var i=r*n;i=i.toFixed(2),a.setFieldsValue(v()({},"total",i))}},e.sumPrice=function(t){var a=e.props.form,r=a.getFieldValue("quantity"),n=t;if(void 0!==r&&""!==r&&""!==n&&void 0!==n){var i=n*r;i=i.toFixed(2),a.setFieldsValue(v()({},"total",i))}},e.sum=function(){var t=e.props.form,a=t.getFieldValue("price"),r=t.getFieldValue("quantity");if(void 0!==r&&""!==r&&""!==a&&void 0!==a){var n=a*r;n=n.toFixed(2),t.setFieldsValue(v()({},"total",n))}},e.chooseChange=function(t){var a=e.props,r=a.form,n=a.dispatch;if("\u5176\u4ed6"===t.target.value)r.setFieldsValue(v()({},"quantity",""));else if("\u7533\u62a5\u6570\u91cf"===t.target.value){var i=sessionStorage.getItem("quantityd");"null"!==i?r.setFieldsValue(v()({},"quantity",i)):r.setFieldsValue(v()({},"quantity",""))}else{var o=sessionStorage.getItem("reportno");n({type:"charge/getCheckResultInspway",payload:{reportno:o,inspway:t.target.value},callback:function(e){200===e.code?null!==e.data?r.setFieldsValue({quantity:e.data.weight}):r.setFieldsValue(v()({},"quantity","")):w["a"].open({message:"\u83b7\u53d6\u5931\u8d25",description:e.data})}})}},e.submit=function(){var t=e.props,a=t.form.validateFieldsAndScroll,r=t.dispatch;f["a"].confirm({title:"\u786e\u5b9a\u5220\u9664\u6b64\u6e05\u5355\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){e.sum(),a(function(t,a){var n=JSON.parse(localStorage.getItem("userinfo")),i=sessionStorage.getItem("reportno"),o=sessionStorage.getItem("FinalPriceOrigin"),s=e.state.value;t||r({type:"charge/updatePriceMaking",payload:h()({},a,{reportno:i,priceman:n.nameC,priceway:s}),callback:function(e){200===e.code?(w["a"].open({message:"\u5b9a\u4ef7\u6210\u529f"}),"ListFictionAdd"===o?T.a.push({pathname:"/Charge/ListFictionAdd"}):"FinalPrice"===o&&T.a.push({pathname:"/Charge/FinalPrice"})):w["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:e.data})}})})}})},e}return k()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.dispatch,r=t.form,n=(JSON.parse(localStorage.getItem("userinfo")).certCode,sessionStorage.getItem("reportno")),i=sessionStorage.getItem("inspway").split(" ");i.push("\u7533\u62a5\u6570\u91cf"),i.push("\u5176\u4ed6"),this.setState({checkProject:i}),a({type:"charge/getPriceMaking",payload:{reportNo:n},callback:function(t){200===t.code?null!=t.data&&(e.setState({value:t.data.priceway.trim()}),r.setFieldsValue({total:t.data.total}),e.setState({priceway:t.data.priceway.trim()}),"\u6309\u5355\u4ef7"===t.data.priceway.trim()&&r.setFieldsValue({choose:t.data.choose.trim(),price:parseFloat(t.data.price.trim()),quantity:parseFloat(t.data.quantity.trim())})):w["a"].open({message:"\u83b7\u53d6\u5931\u8d25",description:t.data})}})}},{key:"render",value:function(){var e=this.props,t=(e.charge.data,e.loading,e.form.getFieldDecorator),a=this.state,r=(a.visible,a.value),n=a.checkProject,i=sessionStorage.getItem("reportno"),o=sessionStorage.getItem("reportdate"),g=sessionStorage.getItem("applicant"),h=sessionStorage.getItem("cargoname"),f=sessionStorage.getItem("inspway"),y=n.map(function(e){return O.a.createElement(d["a"],{key:e,value:e},e)}),v={reportno:i,reportdate:o,applicant:g,cargoname:h,inspway:f};return O.a.createElement(A["a"],{text:v},O.a.createElement(s["a"],{bordered:!1},O.a.createElement(c["a"],null,O.a.createElement(p["a"],{sm:22},O.a.createElement(m["a"],{type:"primary",onClick:this.submit},"\u4fdd\u5b58")),O.a.createElement(p["a"],{sm:2},O.a.createElement(m["a"],{type:"primary",style:{marginLeft:16},onClick:this.back},O.a.createElement(u["a"],{type:"left"}),"\u8fd4\u56de"))),O.a.createElement("br",null),O.a.createElement(s["a"],null,O.a.createElement("span",null," \u9009\u62e9\u5b9a\u4ef7\u65b9\u5f0f\uff1a "),O.a.createElement(d["a"].Group,{onChange:this.onChange,value:r,defaultValue:"\u6309\u5355\u4ef7"},O.a.createElement(d["a"],{value:"\u6309\u5355\u4ef7"},"\u6309\u5355\u4ef7"),O.a.createElement(d["a"],{value:"\u6309\u6279\u6b21"},"\u6309\u6279\u6b21")),"\u6309\u5355\u4ef7"===r?[O.a.createElement(R["a"],null,O.a.createElement(R["a"].Item,{label:"\u6570\u91cf\u9009\u62e9"},t("choose",{rules:"\u6309\u5355\u4ef7"===r?[{required:!0,message:"\u8bf7\u9009\u62e9\u6570\u91cf\u9009\u62e9"}]:[]})(O.a.createElement(d["a"].Group,{onChange:this.chooseChange},y))),O.a.createElement(R["a"].Item,{label:"\u5355\u4ef7"},t("price",{rules:"\u6309\u5355\u4ef7"===r?[{required:!0,whitespace:!0,type:"number",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57"}]:[]})(O.a.createElement(l["a"],{style:{width:"25%"},min:0,step:.01,onChange:this.sumPrice}))),O.a.createElement(R["a"].Item,{label:"\u6570\u91cf"},t("quantity",{rules:"\u6309\u5355\u4ef7"===r?[{required:!0,whitespace:!0,type:"number",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57"}]:[]})(O.a.createElement(l["a"],{style:{width:"25%"},min:0,step:.01,onChange:this.sumQuanlity}))),O.a.createElement(R["a"].Item,{label:"\u603b\u4ef7"},t("total",{rules:"\u6309\u5355\u4ef7"===r?[{required:!0,whitespace:!0,type:"number",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57"}]:[]})(O.a.createElement(l["a"],{style:{width:"25%"},min:0,step:.01,onBlur:this.sum}))))]:[],"\u6309\u6279\u6b21"===r?[O.a.createElement(R["a"],null,O.a.createElement(R["a"].Item,{label:"\u68c0\u9a8c\u8d39"},t("total",{rules:"\u6309\u6279\u6b21"===r?[{required:!0,whitespace:!0,type:"number",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57"}]:[]})(O.a.createElement(l["a"],{style:{width:"25%"},min:0,step:.01}))))]:[],O.a.createElement(R["a"].Item,{label:"\u5907\u6ce8"},t("remark",{})(O.a.createElement(L,{style:{width:"25%",minHeight:32},placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8\u4e0d\u8d85\u8fc750\u4e2a\u5b57",rows:5}))))))}}]),a}(M["PureComponent"]),i=o))||i)||i);t["default"]=Q}}]);