(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[62],{xKih:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,l,i,o=a("bx4M"),s=(a("14J3"),a("BMrR")),c=(a("jCWc"),a("kPKH")),p=(a("+L6B"),a("2/Rp")),u=(a("DZo9"),a("8z0m")),m=(a("Pwec"),a("CtXQ")),d=(a("2qtc"),a("kLXV")),f=a("d6i3"),h=a.n(f),g=a("1l/V"),y=a.n(g),v=(a("miYZ"),a("tsqr")),w=(a("/xke"),a("TeRw")),E=a("2Taf"),b=a.n(E),k=a("vZ4D"),S=a.n(k),U=a("l4Ni"),C=a.n(U),L=a("ujKo"),P=a.n(L),F=a("MhPg"),T=a.n(F),M=(a("y8nQ"),a("Vl3Y")),R=(a("OaEy"),a("2fM7")),D=(a("sRBo"),a("kaz8")),x=a("q1tI"),z=a.n(x),B=a("MuoO"),I=a("zHco");a("V54k"),a("wd/R");function O(e){return function(){var t,a=P()(e);if(V()){var n=P()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return C()(this,t)}}function V(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}D["a"].Group,R["a"].Option;function j(e){return new Promise(function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}})}var G=(n=M["a"].create(),r=Object(B["connect"])(function(e){var t=e.company,a=e.loading;return{company:t,loading:a.models.company}}),n(l=r((i=function(e){T()(a,e);var t=O(a);function a(){var e;b()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),e.state={visible:!1,previewVisible:!1,previewImage:"",fileList:[],headUrl:void 0,signUrl:void 0,photoUrl:void 0,uploadType:""},e.handleOk=function(){var t=e.props,a=t.form.validateFieldsAndScroll,n=t.dispatch,r=sessionStorage.getItem("username"),l=e.state.uploadType;a(function(t,a){if(!t){var i=new FormData;a.MultipartFile.fileList.forEach(function(e){i.append("multipartFile",e.originFileObj)}),i.append("username",r),"sign"===l?n({type:"company/uploadUserSeal",payload:i,callback:function(t){400===t.code?w["a"].open({message:"\u4e0a\u4f20\u5931\u8d25",description:t.data}):(v["a"].success("\u4e0a\u4f20\u6210\u529f"),e.componentDidMount())}}):"head"===l?n({type:"company/uploadUserAuthor",payload:i,callback:function(t){400===t.code?w["a"].open({message:"\u4e0a\u4f20\u5931\u8d25",description:t.data}):(v["a"].success("\u4e0a\u4f20\u6210\u529f"),e.componentDidMount())}}):"photo"===l&&n({type:"company/uploadUserPhoto",payload:i,callback:function(t){400===t.code?w["a"].open({message:"\u4e0a\u4f20\u5931\u8d25",description:t.data}):(v["a"].success("\u4e0a\u4f20\u6210\u529f"),e.componentDidMount())}}),e.setState({visible:!1})}console.log(t)})},e.showSign=function(){var t=e.props.form;t.resetFields(),e.setState({fileList:[]}),e.setState({visible:!0}),e.setState({uploadType:"sign"})},e.showHead=function(){var t=e.props.form;t.resetFields(),e.setState({fileList:[]}),e.setState({visible:!0}),e.setState({uploadType:"head"})},e.showPhoto=function(){var t=e.props.form;t.resetFields(),e.setState({fileList:[]}),e.setState({visible:!0}),e.setState({uploadType:"photo"})},e.handleCancel=function(){var t=e.props.form;t.resetFields(),e.setState({visible:!1})},e.Cancel=function(){return e.setState({previewVisible:!1})},e.handlePreview=function(){var t=y()(h.a.mark(function t(a){return h.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a.url||a.preview){t.next=4;break}return t.next=3,j(a.originFileObj);case 3:a.preview=t.sent;case 4:e.setState({previewImage:a.url||a.preview,previewVisible:!0});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.file,n=t.fileList,r="image/jpg"===a.type,l="image/jpeg"===a.type,i="image/gif"===a.type,o="image/png"===a.type,s=a.size/1024/1024<20;r||i||l||o?s?(e.setState({fileList:n}),console.log(n)):d["a"].error({title:"\u8d85\u8fc720M\u9650\u5236\uff0c\u4e0d\u5141\u8bb8\u4e0a\u4f20~"}):d["a"].error({title:"\u53ea\u80fd\u4e0a\u4f20JPG \u3001GIF \u3001PNG\u3001JPEG\u683c\u5f0f\u7684\u56fe\u7247~"})},e.handleBeforeUpload=function(e){return!1},e.back=function(){e.props.history.goBack()},e}return S()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch,a=sessionStorage.getItem("username");t({type:"company/getUser",payload:{name:a},callback:function(a){200===a.code&&(null!==a.data.signurl&&t({type:"company/getUrl",payload:{url:a.data.signurl},callback:function(t){200===t.code&&e.setState({signUrl:t.data})}}),null!==a.data.authorizeurl&&t({type:"company/getUrl",payload:{url:a.data.authorizeurl},callback:function(t){200===t.code&&e.setState({headUrl:t.data})}}),null!==a.data.photourl&&t({type:"company/getUrl",payload:{url:a.data.photourl},callback:function(t){200===t.code&&e.setState({photoUrl:t.data})}}))}})}},{key:"render",value:function(){var e=z.a.createElement("div",null,z.a.createElement(m["a"],{type:"plus"}),z.a.createElement("div",{className:"ant-upload-text"},"Upload")),t=this.props,a=(t.loading,t.form.getFieldDecorator),n=this.state,r=n.fileList,l=n.visible,i=n.previewVisible,f=n.previewImage,h=n.signUrl,g=n.headUrl,y=n.photoUrl,v=sessionStorage.getItem("username"),w={nameC:v};return z.a.createElement(I["a"],{text:w},z.a.createElement(d["a"],{title:"\u56fe\u7247\u4e0a\u4f20",visible:l,onOk:this.handleOk,onCancel:this.handleCancel},z.a.createElement(M["a"],null,z.a.createElement(M["a"].Item,{label:"\u6587\u4ef6\u4e0a\u4f20"},a("MultipartFile",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e0a\u4f20\u6587\u4ef6"}]})(z.a.createElement(u["a"],{listType:"picture-card",fileList:r,onPreview:this.handlePreview,beforeUpload:this.handleBeforeUpload,onChange:this.handleChange},r.length>=1?null:e))),z.a.createElement(d["a"],{visible:i,footer:null,onCancel:this.Cancel},z.a.createElement("img",{alt:"example",style:{width:"100%"},src:f})))),z.a.createElement(o["a"],{size:"small"},z.a.createElement(s["a"],null,z.a.createElement(c["a"],{span:22},z.a.createElement(p["a"],{style:{marginBottom:12},type:"primary",onClick:this.showPhoto},"\u4e0a\u4f20\u4e8c\u5bf8\u7167\u7247")),z.a.createElement(c["a"],{span:2},z.a.createElement(p["a"],{style:{marginBottom:12},type:"primary",onClick:this.back},"\u8fd4\u56de"))),""===y||null===y||void 0===y?[z.a.createElement("div",{style:{marginTop:20,marginLeft:20}},"\u6682\u65e0\u56fe\u7247")]:[z.a.createElement("img",{style:{marginTop:20},src:y,height:"200"})]),z.a.createElement("br",null),z.a.createElement(o["a"],{size:"small"},z.a.createElement(s["a"],null,z.a.createElement(c["a"],{span:24},z.a.createElement(p["a"],{style:{marginBottom:12},type:"primary",onClick:this.showSign},"\u4e0a\u4f20\u7b7e\u540d"))),""===h||null===h||void 0===h?[z.a.createElement("div",{style:{marginTop:20,marginLeft:20}},"\u6682\u65e0\u56fe\u7247")]:[z.a.createElement("img",{style:{marginTop:20},src:h,height:"100"})]),z.a.createElement("br",null),z.a.createElement(o["a"],{size:"small"},z.a.createElement(s["a"],null,z.a.createElement(c["a"],{span:24},z.a.createElement(p["a"],{style:{marginBottom:12},type:"primary",onClick:this.showHead},"\u4e0a\u4f20\u6388\u6743\u56fe\u7247"))),""===g||null===g||void 0===g?[z.a.createElement("div",{style:{marginTop:20,marginLeft:20}},"\u6682\u65e0\u56fe\u7247")]:[z.a.createElement("img",{style:{marginTop:20},src:g,height:"150"})]))}}]),a}(x["PureComponent"]),l=i))||l)||l);t["default"]=G}}]);