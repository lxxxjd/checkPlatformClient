(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[54],{X1Ba:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,l,o,i=a("bx4M"),c=(a("14J3"),a("BMrR")),s=(a("jCWc"),a("kPKH")),p=(a("+L6B"),a("2/Rp")),u=(a("DZo9"),a("8z0m")),d=(a("Pwec"),a("CtXQ")),m=(a("2qtc"),a("kLXV")),f=a("d6i3"),h=a.n(f),y=a("1l/V"),g=a.n(y),v=(a("miYZ"),a("tsqr")),w=(a("/xke"),a("TeRw")),b=a("2Taf"),E=a.n(b),k=a("vZ4D"),S=a.n(k),C=a("l4Ni"),P=a.n(C),F=a("ujKo"),U=a.n(F),D=a("MhPg"),L=a.n(D),M=(a("y8nQ"),a("Vl3Y")),R=(a("OaEy"),a("2fM7")),O=(a("sRBo"),a("kaz8")),B=a("q1tI"),T=a.n(B),I=a("MuoO"),x=a("zHco");a("V54k"),a("wd/R");function z(e){return function(){var t,a=U()(e);if(V()){var n=U()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return P()(this,t)}}function V(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}O["a"].Group,R["a"].Option;function j(e){return new Promise(function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}})}var J=(n=M["a"].create(),r=Object(I["connect"])(function(e){var t=e.company,a=e.loading;return{company:t,loading:a.models.company}}),n(l=r((o=function(e){L()(a,e);var t=z(a);function a(){var e;E()(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),e.state={visible:!1,previewVisible:!1,previewImage:"",fileList:[],headUrl:"",signUrl:"",uploadType:"",photourl:""},e.handleOk=function(){var t=e.props,a=t.form.validateFieldsAndScroll,n=t.dispatch,r=JSON.parse(localStorage.getItem("userinfo")),l=e.state.uploadType;a(function(t,a){if(!t){var o=new FormData;a.MultipartFile.fileList.forEach(function(e){o.append("file",e.originFileObj)}),o.append("certCode",r.certCode),"sign"===l?n({type:"company/uploadSeal",payload:o,callback:function(t){400===t.code?w["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:t.data}):(v["a"].success("\u4e0a\u4f20\u6210\u529f"),e.componentDidMount())}}):"head"===l?n({type:"company/uploadDocumentHead",payload:o,callback:function(t){400===t.code?w["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:t.data}):(v["a"].success("\u4e0a\u4f20\u6210\u529f"),e.componentDidMount())}}):"photo"===l&&n({type:"company/uploadPhoto",payload:o,callback:function(t){400===t.code?w["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:t.data}):(v["a"].success("\u4e0a\u4f20\u6210\u529f"),e.componentDidMount())}}),e.setState({visible:!1}),form.resetFields()}console.log(t)})},e.showSign=function(){var t=e.props.form;t.resetFields(),e.setState({fileList:[]}),e.setState({visible:!0}),e.setState({uploadType:"sign"})},e.showHead=function(){var t=e.props.form;t.resetFields(),e.setState({fileList:[]}),e.setState({visible:!0}),e.setState({uploadType:"head"})},e.showPhoto=function(){var t=e.props.form;t.resetFields(),e.setState({fileList:[]}),e.setState({visible:!0}),e.setState({uploadType:"photo"})},e.handleCancel=function(){var t=e.props.form;t.resetFields(),e.setState({visible:!1})},e.Cancel=function(){return e.setState({previewVisible:!1})},e.handlePreview=function(){var t=g()(h.a.mark(function t(a){return h.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a.url||a.preview){t.next=4;break}return t.next=3,j(a.originFileObj);case 3:a.preview=t.sent;case 4:e.setState({previewImage:a.url||a.preview,previewVisible:!0});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.file,n=t.fileList,r="image/jpg"===a.type,l="image/jpeg"===a.type,o="image/gif"===a.type,i="image/png"===a.type,c=a.size/1024/1024<20;r||o||l||i?c?e.setState({fileList:n}):m["a"].error({title:"\u8d85\u8fc720M\u9650\u5236\uff0c\u4e0d\u5141\u8bb8\u4e0a\u4f20~"}):m["a"].error({title:"\u53ea\u80fd\u4e0a\u4f20JPG \u3001GIF \u3001PNG\u3001JPEG\u683c\u5f0f\u7684\u56fe\u7247~"})},e.handleBeforeUpload=function(e){return!1},e.back=function(){e.props.history.goBack()},e}return S()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch,a=JSON.parse(localStorage.getItem("userinfo"));t({type:"company/getCompany",payload:{certCode:a.certCode},callback:function(a){200===a.code&&(t({type:"company/getUrl",payload:{url:a.data.seal},callback:function(t){200===t.code&&e.setState({signUrl:t.data})}}),t({type:"company/getUrl",payload:{url:a.data.documenthead},callback:function(t){200===t.code&&e.setState({headUrl:t.data})}}),t({type:"company/getUrl",payload:{url:a.data.photourl},callback:function(t){200===t.code&&e.setState({photourl:t.data})}}))}})}},{key:"render",value:function(){var e=T.a.createElement("div",null,T.a.createElement(d["a"],{type:"plus"}),T.a.createElement("div",{className:"ant-upload-text"},"Upload")),t=this.props,a=(t.certificate,t.loading,t.form.getFieldDecorator),n=this.state,r=n.fileList,l=n.visible,o=n.previewVisible,f=n.previewImage,h=n.signUrl,y=n.headUrl,g=n.photourl;return T.a.createElement(x["a"],null,T.a.createElement(m["a"],{title:"\u56fe\u7247\u4e0a\u4f20",visible:l,onOk:this.handleOk,onCancel:this.handleCancel},T.a.createElement(M["a"],null,T.a.createElement(M["a"].Item,{label:"\u6587\u4ef6\u4e0a\u4f20"},a("MultipartFile",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e0a\u4f20\u6587\u4ef6"}]})(T.a.createElement(u["a"],{listType:"picture-card",fileList:r,onPreview:this.handlePreview,beforeUpload:this.handleBeforeUpload,onChange:this.handleChange},r.length>=1?null:e))),T.a.createElement(m["a"],{visible:o,footer:null,onCancel:this.Cancel},T.a.createElement("img",{alt:"example",style:{width:"100%"},src:f})))),T.a.createElement(i["a"],{size:"small"},T.a.createElement(c["a"],null,T.a.createElement(s["a"],{span:24},T.a.createElement(p["a"],{style:{marginBottom:12},type:"primary",onClick:this.showSign},"\u4e0a\u4f20\u516c\u53f8\u4e1a\u52a1\u7528\u7ae0"))),T.a.createElement("img",{src:h,width:"100",height:"100"})),T.a.createElement("br",null),T.a.createElement(i["a"],{size:"small"},T.a.createElement(c["a"],null,T.a.createElement(s["a"],{span:24},T.a.createElement(p["a"],{style:{marginBottom:12},type:"primary",onClick:this.showHead},"\u4e0a\u4f20\u516c\u53f8\u8bc1\u4e66\u6807\u8bc6"))),T.a.createElement("img",{style:{marginTop:20},src:y,width:"200"})),T.a.createElement("br",null),T.a.createElement(i["a"],{size:"small"},T.a.createElement(c["a"],null,T.a.createElement(s["a"],{span:24},T.a.createElement(p["a"],{style:{marginBottom:12},type:"primary",onClick:this.showPhoto},"\u4e0a\u4f20\u516c\u53f8\u5546\u6807"))),T.a.createElement("img",{style:{marginTop:20},src:g,width:"120"})))}}]),a}(B["PureComponent"]),l=o))||l)||l);t["default"]=J}}]);