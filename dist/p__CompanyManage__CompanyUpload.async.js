(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[54],{X1Ba:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,i,l,o=a("bx4M"),c=(a("14J3"),a("BMrR")),s=(a("jCWc"),a("kPKH")),p=(a("+L6B"),a("2/Rp")),u=(a("DZo9"),a("8z0m")),d=(a("Pwec"),a("CtXQ")),f=(a("2qtc"),a("kLXV")),m=a("d6i3"),h=a.n(m),y=a("1l/V"),g=a.n(y),v=(a("/xke"),a("TeRw")),w=a("2Taf"),b=a.n(w),E=a("vZ4D"),k=a.n(E),S=a("l4Ni"),C=a.n(S),F=a("ujKo"),U=a.n(F),P=a("MhPg"),R=a.n(P),D=(a("y8nQ"),a("Vl3Y")),L=(a("OaEy"),a("2fM7")),M=(a("sRBo"),a("kaz8")),O=a("q1tI"),B=a.n(O),I=a("MuoO"),x=a("zHco");a("V54k"),a("wd/R");function T(e){return function(){var t,a=U()(e);if(V()){var n=U()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return C()(this,t)}}function V(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}M["a"].Group,L["a"].Option;function j(e){return new Promise(function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}})}var z=(n=D["a"].create(),r=Object(I["connect"])(function(e){var t=e.company,a=e.loading;return{company:t,loading:a.models.company}}),n(i=r((l=function(e){R()(a,e);var t=T(a);function a(){var e;b()(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return e=t.call.apply(t,[this].concat(r)),e.state={visible:!1,previewVisible:!1,previewImage:"",fileList:[],headUrl:"",signUrl:"",uploadType:""},e.handleOk=function(){var t=e.props,a=t.form.validateFieldsAndScroll,n=t.dispatch,r=JSON.parse(localStorage.getItem("userinfo")),i=e.state.uploadType;a(function(t,a){if(!t){var l=new FormData;a.MultipartFile.fileList.forEach(function(e){l.append("file",e.originFileObj)}),l.append("certCode",r.certCode),"sign"===i?n({type:"company/uploadSeal",payload:l,callback:function(t){400===t.code?v["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:t.data}):e.componentDidMount()}}):"head"===i&&n({type:"company/uploadDocumentHead",payload:l,callback:function(t){400===t.code?v["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:t.data}):e.componentDidMount()}}),e.setState({visible:!1}),form.resetFields()}console.log(t)})},e.showSign=function(){var t=e.props.form;t.resetFields(),e.setState({fileList:[]}),e.setState({visible:!0}),e.setState({uploadType:"sign"})},e.showHead=function(){var t=e.props.form;t.resetFields(),e.setState({fileList:[]}),e.setState({visible:!0}),e.setState({uploadType:"head"})},e.handleCancel=function(){var t=e.props.form;t.resetFields(),e.setState({visible:!1})},e.Cancel=function(){return e.setState({previewVisible:!1})},e.handlePreview=function(){var t=g()(h.a.mark(function t(a){return h.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a.url||a.preview){t.next=4;break}return t.next=3,j(a.originFileObj);case 3:a.preview=t.sent;case 4:e.setState({previewImage:a.url||a.preview,previewVisible:!0});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.file,n=t.fileList,r="image/jpg"===a.type,i="image/jpeg"===a.type,l="image/gif"===a.type,o="image/png"===a.type,c=a.size/1024/1024<20;r||l||i||o?c?e.setState({fileList:n}):f["a"].error({title:"\u8d85\u8fc720M\u9650\u5236\uff0c\u4e0d\u5141\u8bb8\u4e0a\u4f20~"}):f["a"].error({title:"\u53ea\u80fd\u4e0a\u4f20JPG \u3001GIF \u3001PNG\u3001JPEG\u683c\u5f0f\u7684\u56fe\u7247~"})},e.handleBeforeUpload=function(e){return!1},e.back=function(){e.props.history.goBack()},e}return k()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch,a=JSON.parse(localStorage.getItem("userinfo"));t({type:"company/getCompany",payload:{certCode:a.certCode},callback:function(a){200===a.code&&(t({type:"company/getUrl",payload:{url:a.data.seal},callback:function(t){200===t.code&&e.setState({signUrl:t.data})}}),t({type:"company/getUrl",payload:{url:a.data.documenthead},callback:function(t){200===t.code&&e.setState({headUrl:t.data})}}))}})}},{key:"render",value:function(){var e=B.a.createElement("div",null,B.a.createElement(d["a"],{type:"plus"}),B.a.createElement("div",{className:"ant-upload-text"},"Upload")),t=this.props,a=(t.certificate,t.loading,t.form.getFieldDecorator),n=this.state,r=n.fileList,i=n.visible,l=n.previewVisible,m=n.previewImage,h=n.signUrl,y=n.headUrl;return B.a.createElement(x["a"],null,B.a.createElement(f["a"],{title:"\u56fe\u7247\u4e0a\u4f20",visible:i,onOk:this.handleOk,onCancel:this.handleCancel},B.a.createElement(D["a"],null,B.a.createElement(D["a"].Item,{label:"\u6587\u4ef6\u4e0a\u4f20"},a("MultipartFile",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e0a\u4f20\u6587\u4ef6"}]})(B.a.createElement(u["a"],{listType:"picture-card",fileList:r,onPreview:this.handlePreview,beforeUpload:this.handleBeforeUpload,onChange:this.handleChange},r.length>=1?null:e))),B.a.createElement(f["a"],{visible:l,footer:null,onCancel:this.Cancel},B.a.createElement("img",{alt:"example",style:{width:"100%"},src:m})))),B.a.createElement(o["a"],{size:"small"},B.a.createElement(c["a"],null,B.a.createElement(s["a"],{span:24},B.a.createElement(p["a"],{style:{marginBottom:12},type:"primary",onClick:this.showSign},"\u4e0a\u4f20\u516c\u53f8\u4e1a\u52a1\u7528\u7ae0"))),B.a.createElement("img",{src:h,width:"100",height:"100"})),B.a.createElement("br",null),B.a.createElement(o["a"],{size:"small"},B.a.createElement(c["a"],null,B.a.createElement(s["a"],{span:24},B.a.createElement(p["a"],{style:{marginBottom:12},type:"primary",onClick:this.showHead},"\u4e0a\u4f20\u516c\u53f8\u8bc1\u4e66\u6807\u8bc6"))),B.a.createElement("img",{style:{marginTop:20},src:y,width:"200"})))}}]),a}(O["PureComponent"]),i=l))||i)||i);t["default"]=z}}]);