(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[134],{IOb0:function(e,t,a){"use strict";a.r(t);a("IzEo");var r,n,l,o,i=a("bx4M"),c=(a("g9YV"),a("wCAj")),s=(a("Pwec"),a("CtXQ")),u=(a("BoS7"),a("Sdc0")),p=(a("+L6B"),a("2/Rp")),m=(a("giR+"),a("fyUT")),d=(a("14J3"),a("BMrR")),f=(a("jCWc"),a("kPKH")),h=(a("iQDF"),a("+eQT")),g=a("2Taf"),v=a.n(g),E=a("vZ4D"),k=a.n(E),y=a("l4Ni"),R=a.n(y),C=a("ujKo"),M=a.n(C),F=a("MhPg"),P=a.n(F),S=(a("OaEy"),a("2fM7")),b=(a("5NDa"),a("5rEg")),Y=(a("y8nQ"),a("Vl3Y")),w=a("q1tI"),D=a.n(w),I=a("MuoO"),V=a("3a4m"),x=a.n(V),N=a("wd/R"),L=a.n(N),z=a("zHco"),B=a("ZzZo"),O=a.n(B),J=a("glGN"),W=a.n(J);function Q(e){return function(){var t,a=M()(e);if(T()){var r=M()(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return R()(this,t)}}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var j=0,A=Y["a"].Item,K=(b["a"].Group,S["a"].Option),Z=(r=Object(I["connect"])(function(e){var t=e.report,a=e.loading;return{report:t,loading:a.models.report}}),n=Y["a"].create(),r(l=n((o=function(e){P()(a,e);var t=Q(a);function a(){var e;v()(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n)),e.state={formValues:{},reportPriceMakingResult:[],reportPriceMakingWithProfitResult:{}},e.columns=[{title:"\u59d4\u6258\u7f16\u53f7",dataIndex:"reportno"},{title:"\u59d4\u6258\u65e5\u671f",dataIndex:"reportdate",render:function(e){return D.a.createElement("span",null,L()(e).format("YYYY-MM-DD"))}},{title:"\u59d4\u6258\u4eba",dataIndex:"applicant"},{title:"\u68c0\u6d4b\u54c1\u540d",dataIndex:"cargoname"},{title:"\u68c0\u9a8c\u8d39",dataIndex:"price"},{title:"\u652f\u51fa\u603b\u989d",dataIndex:"totalcost"},{title:"\u5229\u6da6",dataIndex:"profit"},{title:"\u5229\u6da6\u7387",dataIndex:"profitrate"},{title:"\u72b6\u6001",dataIndex:"status"},{title:"\u64cd\u4f5c",render:function(t,a){return D.a.createElement(w["Fragment"],null,D.a.createElement("a",{onClick:function(){return e.handleReview(!0,t)}},"\u67e5\u770b"))}}],e.init=function(){var t=JSON.parse(localStorage.getItem("userinfo")),a=e.props.dispatch,r={certCode:t.certCode};a({type:"report/selectReportPriceMakingByConditions",payload:r,callback:function(t){e.state.reportPriceMakingResult=t}})},e.handleReview=function(e,t){sessionStorage.setItem("reportno",t.reportno),sessionStorage.setItem("reportNoForCostEdit",t.reportno),localStorage.setItem("reportDetailNo",t.reportno),x.a.push({pathname:"/Statistics/ReportPriceMakingQueryDetail"})},e.handleFormReset=function(){var t=e.props.form;t.resetFields(),e.init(),e.flag=0},e.handleProfitSearch=function(t){t.preventDefault();var a=e.props,r=a.dispatch,n=a.form;n.validateFields(function(t,a){if(t)console.log(t);else{var l=JSON.parse(localStorage.getItem("userinfo")),o=[],i=[],c=[];void 0!==a.minRate&&null!==a.minRate&&(o.push("profitRate"),c.push(">="),i.push(a.minRate)),void 0!==a.maxRate&&null!==a.maxRate&&(o.push("profitRate"),c.push("<="),i.push(a.maxRate)),void 0!==a.reportdate&&0!==a.reportdate.length&&(o.push("reportdate"),c.push(">="),i.push(L()(a.reportdate[0]).format("YYYY-MM-DD")),o.push("reportdate"),c.push("<="),i.push(L()(a.reportdate[1]).format("YYYY-MM-DD")));var s=n.getFieldValue("keys");for(var u in s){var p=s[u];console.log(p);var m=n.getFieldValue("kinds".concat(p)),d=n.getFieldValue("conditions".concat(p)),f=n.getFieldValue("values".concat(p)),h=n.getFieldValue("check".concat(p));!0===h&&void 0!==m&&void 0!==f&&void 0!==d&&(o.push(m),i.push(f),c.push(d))}var g={kinds:o,values:i,conditions:c,certCode:l.certCode};r({type:"report/selectReportPriceMakingByConditionsWithProfit",payload:g,callback:function(t){e.state.reportPriceMakingWithProfitResult=t}})}})},e.handleSearch=function(t){t.preventDefault();var a=e.props,r=a.dispatch,n=a.form;n.validateFields(function(t,a){if(t)console.log(t);else{var l=JSON.parse(localStorage.getItem("userinfo")),o=[],i=[],c=[];void 0!==a.minRate&&null!==a.minRate&&(o.push("profitRate"),c.push(">="),i.push(a.minRate)),void 0!==a.maxRate&&null!==a.maxRate&&(o.push("profitRate"),c.push("<="),i.push(a.maxRate)),void 0!==a.reportdate&&0!==a.reportdate.length&&(o.push("reportdate"),c.push(">="),i.push(L()(a.reportdate[0]).format("YYYY-MM-DD")),o.push("reportdate"),c.push("<="),i.push(L()(a.reportdate[1]).format("YYYY-MM-DD")));var s=n.getFieldValue("keys");for(var u in s){var p=s[u];console.log(p);var m=n.getFieldValue("kinds".concat(p)),d=n.getFieldValue("conditions".concat(p)),f=n.getFieldValue("values".concat(p)),h=n.getFieldValue("check".concat(p));!0===h&&void 0!==m&&void 0!==f&&void 0!==d&&(o.push(m),i.push(f),c.push(d))}var g={kinds:o,values:i,conditions:c,certCode:l.certCode};r({type:"report/selectReportPriceMakingByConditions",payload:g,callback:function(t){e.state.reportPriceMakingResult=t,r({type:"report/selectReportPriceMakingByConditionsWithProfit",payload:g,callback:function(t){e.state.reportPriceMakingWithProfitResult=t}})}})}})},e.remove=function(t){var a=e.props.form,r=a.getFieldValue("keys");e.props.form.validateFields(function(e,t){}),a.setFieldsValue({keys:r.filter(function(e){return e!==t})})},e.add=function(){var t=e.props.form,a=t.getFieldValue("keys"),r=a.concat(j++);t.setFieldsValue({keys:r})},e.flag=0,e.handleAdvanceSearch=function(){if(0===e.flag){var t=4;while(t>0)e.add(),t--;e.flag=1}},e}return k()(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator,t=h["a"].RangePicker,a=this.state.reportPriceMakingWithProfitResult;return D.a.createElement(Y["a"],{onSubmit:this.handleSearch,layout:"horizontal"},D.a.createElement(d["a"],{gutter:16},D.a.createElement(f["a"],{span:8},D.a.createElement("div",null,"\u68c0\u9a8c\u603b\u989d\uff1a",a.checkSum)),D.a.createElement(f["a"],{span:8},D.a.createElement("div",null,"\u5229\u6da6\u603b\u989d\uff1a",a.totalProfit)),D.a.createElement(f["a"],{span:8},D.a.createElement("div",null,"\u5e73\u5747\u5229\u6da6\u7387\uff1a",a.averageProfitRate))),D.a.createElement(d["a"],{gutter:16},D.a.createElement(f["a"],{span:4},D.a.createElement(A,{label:"\u5229\u7387",labelCol:{span:1},wrapperCol:{span:3}},e("minRate",{rules:[]})(D.a.createElement(m["a"],{formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")}})))),D.a.createElement(f["a"],{span:1},D.a.createElement("span",null,"~")),D.a.createElement(f["a"],{span:3},D.a.createElement(A,null,e("maxRate",{rules:[]})(D.a.createElement(m["a"],{formatter:function(e){return"".concat(e,"%")},parser:function(e){return e.replace("%","")}})))),D.a.createElement(f["a"],{span:7},D.a.createElement(Y["a"].Item,{label:"\u59d4\u6258\u65e5\u671f",labelCol:{span:2},wrapperCol:{span:4}},e("reportdate",{})(D.a.createElement(t,{format:"YYYY-MM-DD"})))),D.a.createElement(f["a"],{span:8},D.a.createElement("span",{className:W.a.submitButtons},D.a.createElement(p["a"],{style:{marginLeft:0},onClick:this.handleFormReset},"\u91cd\u7f6e"),D.a.createElement(p["a"],{style:{marginLeft:8},onClick:this.add},"\u589e\u52a0\u6761\u4ef6"),D.a.createElement(p["a"],{style:{marginLeft:8},onClick:this.handleAdvanceSearch},"\u9ad8\u7ea7\u68c0\u7d22"),D.a.createElement(p["a"],{type:"primary",style:{marginLeft:8},onClick:this.handleProfitSearch},"\u67e5\u8be2\u603b\u989d"),D.a.createElement(p["a"],{type:"primary",style:{marginLeft:8},htmlType:"submit"},"\u67e5\u8be2")))))}},{key:"render",value:function(){var e=this,t=this.props.loading,a=this.props.form,r=a.getFieldDecorator,n=a.getFieldValue;r("keys",{initialValue:[]});var l=n("keys"),o=this.state.reportPriceMakingResult,p=l.map(function(t,a){return D.a.createElement("div",null,a%2===0&&0!==l.length?D.a.createElement(d["a"],{className:O.a.rowClass}):null,D.a.createElement(f["a"],{md:1,sm:20},D.a.createElement(Y["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},r("check".concat(t),{initialValue:!0,valuePropName:"checked"})(D.a.createElement(u["a"],{checkedChildren:"\u5f00",unCheckedChildren:"\u5173",defaultChecked:!0})))),D.a.createElement(f["a"],{md:3,sm:20},D.a.createElement(Y["a"].Item,{style:{marginRight:8},labelCol:{span:5},wrapperCol:{span:6}},r("kinds".concat(t),{rules:[{message:"\u9009\u62e9\u5b57\u6bb5"}]})(D.a.createElement(S["a"],{placeholder:"\u9009\u62e9\u5b57\u6bb5"},D.a.createElement(K,{value:"reportno"}," \u59d4\u6258\u7f16\u53f7"),D.a.createElement(K,{value:"applicant"},"\u59d4\u6258\u4eba"),D.a.createElement(K,{value:"agent"},"\u4ee3\u7406\u4eba"),D.a.createElement(K,{value:"businesssort"},"\u4e1a\u52a1\u7c7b\u522b"),D.a.createElement(K,{value:"businesssource"},"\u4e1a\u52a1\u6765\u6e90"),D.a.createElement(K,{value:"tradeway"},"\u8d38\u6613\u65b9\u5f0f"),D.a.createElement(K,{value:"cargoname"},"\u68c0\u67e5\u54c1\u540d"),D.a.createElement(K,{value:"cargosort"},"\u8d27\u7269\u79cd\u7c7b"),D.a.createElement(K,{value:"inspplace1"},"\u68c0\u9a8c\u5730\u70b9"),D.a.createElement(K,{value:"section"},"\u6267\u884c\u90e8\u95e8"))))),D.a.createElement(f["a"],{md:3,sm:20},D.a.createElement(Y["a"].Item,{style:{marginRight:8},labelCol:{span:5},wrapperCol:{span:6}},r("conditions".concat(t),{rules:[{message:"\u9009\u62e9\u6761\u4ef6"}]})(D.a.createElement(S["a"],{placeholder:"\u9009\u62e9\u6761\u4ef6"},D.a.createElement(K,{value:"="},"\u7b49\u4e8e"),D.a.createElement(K,{value:"!="},"\u4e0d\u7b49\u4e8e"),D.a.createElement(K,{value:"like"},"\u5305\u542b"),D.a.createElement(K,{value:"not like"},"\u4e0d\u5305\u542b"))))),D.a.createElement(f["a"],{md:4,sm:10},D.a.createElement(A,null,r("values".concat(t),{rules:[{message:"\u9009\u62e9\u6570\u503c"}]})(D.a.createElement(b["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),D.a.createElement(f["a"],{md:1,sm:5},l.length>=1?D.a.createElement(s["a"],{style:{fontSize:24,marginLeft:8},type:"minus-circle",theme:"twoTone",twoToneColor:"#ff0000",onClick:function(){return e.remove(t)}}):null))});return D.a.createElement(z["a"],{title:"\u6837\u54c1\u67e5\u8be2"},D.a.createElement(i["a"],{bordered:!1,size:"small"},D.a.createElement(Y["a"],{onSubmit:this.handleSubmit},D.a.createElement("div",{className:W.a.tableListForm},this.renderSimpleForm()),D.a.createElement(d["a"],{className:W.a.tableListForm},p)),D.a.createElement("div",{className:W.a.tableList},D.a.createElement(c["a"],{size:"middle",rowKey:"keyno",loading:t,dataSource:o,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns}))))}}]),a}(w["PureComponent"]),l=o))||l)||l);t["default"]=Z}}]);