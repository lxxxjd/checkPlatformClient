(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[43],{iGbR:function(e,t,a){"use strict";a.r(t);a("IzEo");var r,n,i,o,l=a("bx4M"),s=(a("5NDa"),a("5rEg")),c=(a("giR+"),a("fyUT")),u=(a("14J3"),a("BMrR")),m=(a("Pwec"),a("CtXQ")),p=(a("jCWc"),a("kPKH")),d=(a("+L6B"),a("2/Rp")),f=(a("7Kak"),a("9yH6")),g=a("p0pE"),h=a.n(g),y=(a("2qtc"),a("kLXV")),v=a("eHn4"),E=a.n(v),b=(a("/xke"),a("TeRw")),w=a("2Taf"),F=a.n(w),k=a("vZ4D"),I=a.n(k),S=a("l4Ni"),q=a.n(S),P=a("ujKo"),C=a.n(P),V=a("MhPg"),N=a.n(V),R=(a("OaEy"),a("2fM7")),x=(a("y8nQ"),a("Vl3Y")),M=a("q1tI"),O=a.n(M),j=a("MuoO"),D=a("3a4m"),J=a.n(D),L=a("zHco");a("UNh3");function T(e){return function(){var t,a=C()(e);if(A()){var r=C()(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return q()(this,t)}}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}x["a"].Item,R["a"].Option;var H=(r=Object(j["connect"])(function(e){var t=e.charge,a=e.loading;return{charge:t,loading:a.models.charge}}),n=x["a"].create(),r(i=n((o=function(e){N()(a,e);var t=T(a);function a(){var e;F()(this,a);for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=t.call.apply(t,[this].concat(n)),e.state={formValues:{},value:"",checkProject:[],priceway:""},e.back=function(){window.history.back()},e.onChange=function(t){e.setState({value:t.target.value});var a=e.props,r=a.form,n=a.dispatch;r.resetFields();var i=sessionStorage.getItem("reportno");t.target.value===e.state.priceway&&n({type:"charge/getPriceMaking",payload:{reportNo:i},callback:function(t){200===t.code?null!=t.data&&(e.setState({value:t.data.priceway.trim()}),r.setFieldsValue({total:t.data.total}),"\u6309\u5355\u4ef7"===t.data.priceway.trim()&&r.setFieldsValue({choose:t.data.choose.trim(),price:parseFloat(t.data.price.trim()),quantity:parseFloat(t.data.quantity.trim())})):b["a"].open({message:"\u83b7\u53d6\u5931\u8d25",description:t.data})}})},e.sumQuanlity=function(t){var a=e.props.form,r=a.getFieldValue("price"),n=t;if(void 0!==n&&""!==n&&""!==r&&void 0!==r){var i=r*n;i=i.toFixed(2),a.setFieldsValue(E()({},"total",i))}},e.sumPrice=function(t){var a=e.props.form,r=a.getFieldValue("quantity"),n=t;if(void 0!==r&&""!==r&&""!==n&&void 0!==n){var i=n*r;i=i.toFixed(2),a.setFieldsValue(E()({},"total",i))}},e.sum=function(){var t=e.props.form,a=t.getFieldValue("price"),r=t.getFieldValue("quantity");if(void 0!==r&&""!==r&&""!==a&&void 0!==a){var n=a*r;n=n.toFixed(2),t.setFieldsValue(E()({},"total",n))}},e.submit=function(){y["a"].confirm({title:"\u786e\u5b9a\u4fdd\u5b58\u6b64\u5b9a\u4ef7\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){e.sum();var t=e.props,a=t.form.validateFieldsAndScroll,r=t.dispatch;a(function(t,a){var n=JSON.parse(localStorage.getItem("userinfo")),i=sessionStorage.getItem("reportno"),o=sessionStorage.getItem("FinalPriceOrigin"),l=e.state.value;t||r({type:"charge/updatePriceMaking",payload:h()({},a,{reportno:i,priceman:n.nameC,priceway:l}),callback:function(e){200===e.code?(b["a"].open({message:"\u5b9a\u4ef7\u6210\u529f"}),"ListFictionAdd"===o?J.a.push({pathname:"/Charge/ListFictionAdd"}):"FinalPrice"===o&&J.a.push({pathname:"/Charge/FinalPrice"})):b["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:e.data})}})})}})},e}return I()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.dispatch,r=t.form,n=(JSON.parse(localStorage.getItem("userinfo")).certCode,sessionStorage.getItem("reportno")),i=sessionStorage.getItem("inspway").split(" ");this.setState({checkProject:i}),i.push("\u7533\u62a5\u6570\u91cf"),i.push("\u5176\u4ed6"),a({type:"charge/getPriceMaking",payload:{reportNo:n},callback:function(t){200===t.code?null!=t.data&&(e.setState({value:t.data.priceway.trim()}),r.setFieldsValue({total:t.data.total}),e.setState({priceway:t.data.priceway.trim()}),"\u6309\u5355\u4ef7"===t.data.priceway.trim()&&r.setFieldsValue({choose:t.data.choose.trim(),price:parseFloat(t.data.price.trim()),quantity:parseFloat(t.data.quantity.trim())})):b["a"].open({message:"\u83b7\u53d6\u5931\u8d25",description:t.data})}})}},{key:"render",value:function(){var e=this.props,t=(e.charge.data,e.loading,e.form.getFieldDecorator),a=this.state,r=(a.visible,a.value),n=a.checkProject,i=sessionStorage.getItem("reportno"),o=sessionStorage.getItem("reportdate"),g=sessionStorage.getItem("applicant"),h=sessionStorage.getItem("cargoname"),y=sessionStorage.getItem("inspway"),v=n.map(function(e){return O.a.createElement(f["a"],{key:e,value:e},e)}),E={reportno:i,reportdate:o,applicant:g,cargoname:h,inspway:y};return O.a.createElement(L["a"],{text:E},O.a.createElement(l["a"],{bordered:!1},O.a.createElement(u["a"],null,O.a.createElement(p["a"],{sm:22},O.a.createElement(d["a"],{type:"primary",onClick:this.submit},"\u4fdd\u5b58")),O.a.createElement(p["a"],{sm:2},O.a.createElement(d["a"],{type:"primary",style:{marginLeft:16},onClick:this.back},O.a.createElement(m["a"],{type:"left"}),"\u8fd4\u56de"))),O.a.createElement("br",null),O.a.createElement(l["a"],null,O.a.createElement("span",null," \u9009\u62e9\u5b9a\u4ef7\u65b9\u5f0f\uff1a "),O.a.createElement(f["a"].Group,{onChange:this.onChange,value:r},O.a.createElement(f["a"],{value:"\u6309\u5355\u4ef7"},"\u6309\u5355\u4ef7"),O.a.createElement(f["a"],{value:"\u6309\u6279\u6b21"},"\u6309\u6279\u6b21")),"\u6309\u5355\u4ef7"===r?[O.a.createElement(x["a"],null,O.a.createElement(x["a"].Item,{label:"\u6570\u91cf\u9009\u62e9"},t("choose",{rules:"\u6309\u5355\u4ef7"===r?[{required:!0,message:"\u8bf7\u9009\u62e9\u6570\u91cf\u9009\u62e9"}]:[]})(O.a.createElement(f["a"].Group,null,v))),O.a.createElement(x["a"].Item,{label:"\u5355\u4ef7"},t("price",{rules:"\u6309\u5355\u4ef7"===r?[{required:!0,whitespace:!0,type:"number",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57"}]:[]})(O.a.createElement(c["a"],{style:{width:"25%"},min:0,step:.01,onChange:this.sumPrice}))),O.a.createElement(x["a"].Item,{label:"\u6570\u91cf"},t("quantity",{rules:"\u6309\u5355\u4ef7"===r?[{required:!0,whitespace:!0,type:"number",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57"}]:[]})(O.a.createElement(c["a"],{style:{width:"25%"},min:0,step:.01,onChange:this.sumQuanlity}))),O.a.createElement(x["a"].Item,{label:"\u603b\u4ef7"},t("total",{rules:"\u6309\u5355\u4ef7"===r?[{required:!0,whitespace:!0,type:"number",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57"}]:[]})(O.a.createElement(c["a"],{style:{width:"25%"},min:0,step:.01,onBlur:this.sum}))))]:[],"\u6309\u6279\u6b21"===r?[O.a.createElement(x["a"],null,O.a.createElement(x["a"].Item,{label:"\u68c0\u9a8c\u8d39"},t("total",{rules:"\u6309\u6279\u6b21"===r?[{required:!0,whitespace:!0,type:"number",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57"}]:[]})(O.a.createElement(c["a"],{style:{width:"25%"},min:0,step:.01}))))]:[],"\u6309\u534f\u8bae"===r?[O.a.createElement(x["a"],null,O.a.createElement(x["a"].Item,{label:"\u5b9a\u4ef7\u65b9\u5f0f"},t("choose",{rules:"\u6309\u534f\u8bae"===r?[{required:!0,message:"\u8bf7\u8f93\u5165\u5b9a\u4ef7\u65b9\u5f0f"}]:[]})(O.a.createElement(s["a"],{style:{width:"25%"}}))),O.a.createElement(x["a"].Item,{label:"\u603b\u4ef7"},t("total",{rules:"\u6309\u534f\u8bae"===r?[{required:!0,whitespace:!0,type:"number",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57"}]:[]})(O.a.createElement(c["a"],{style:{width:"25%"},min:0,step:.01}))))]:[],"\u6309\u9879\u76ee"===r?[O.a.createElement(x["a"],null,O.a.createElement(x["a"].Item,{label:"\u603b\u4ef7"},t("total",{rules:"\u6309\u9879\u76ee"===r?[{required:!0,whitespace:!0,type:"number",transform:function(e){if(e)return Number(e)},message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u6570\u5b57"}]:[]})(O.a.createElement(c["a"],{style:{width:"25%"},min:0,step:.01}))))]:[])))}}]),a}(M["PureComponent"]),i=o))||i)||i);t["default"]=H}}]);