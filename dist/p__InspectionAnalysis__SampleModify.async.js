(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[117],{L6HO:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,o,s,i=a("bx4M"),l=(a("g9YV"),a("wCAj")),r=(a("14J3"),a("BMrR")),c=(a("Pwec"),a("CtXQ")),d=(a("jCWc"),a("kPKH")),m=(a("+L6B"),a("2/Rp")),p=(a("2qtc"),a("kLXV")),u=(a("/xke"),a("TeRw")),g=a("eHn4"),y=a.n(g),h=a("2Taf"),f=a.n(h),S=a("vZ4D"),v=a.n(S),E=a("l4Ni"),C=a.n(E),I=a("ujKo"),w=a.n(I),k=a("MhPg"),D=a.n(k),R=(a("OaEy"),a("2fM7")),A=(a("y8nQ"),a("Vl3Y")),x=a("q1tI"),b=a.n(x),K=a("MuoO"),M=a("3a4m"),O=a.n(M),F=a("zHco"),N=a("RdVf"),L=a.n(N),z=(a("5NDa"),a("5rEg")),J=a("p0pE"),B=a.n(J),V=a("e+8u"),T=a.n(V);function P(e){return function(){var t,a=w()(e);if(Q()){var n=w()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return C()(this,t)}}function Q(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var j,H,q,X,Y=A["a"].Item,W=R["a"].Option,Z=(n=Object(K["connect"])(function(e){var t=e.inspectionAnalysis,a=e.loading;return{inspectionAnalysis:t,loading:a.models.inspectionAnalysis}}),n((s=function(e){D()(a,e);var t=P(a);function a(){var e;f()(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),e.handleSearch=function(t){t.preventDefault();var a=e.props,n=a.dispatch,o=a.form,s=a.cargoname,i=JSON.parse(localStorage.getItem("userinfo")).certCode;o.validateFields(function(e,t){if(console.log(e),!e){var a=B()({},t,{cargoname:s,certCode:i});n({type:"inspectionAnalysis/getSamplesByFilter",payload:a})}})},e.handleFormReset=function(){var t=e.props,a=t.form,n=t.applicant,o=t.cargoname;a.resetFields();var s=JSON.parse(localStorage.getItem("userinfo")),i=e.props.dispatch;i({type:"inspectionAnalysis/getSamplesByFilter",payload:{kind:"applicant",value:n,cargoname:o,certCode:s.certCode}})},e}return v()(a,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return b.a.createElement(A["a"],{onSubmit:this.handleSearch,layout:"inline",style:{marginBottom:5}},b.a.createElement(r["a"],{gutter:{md:8,lg:24,xl:48}},b.a.createElement(d["a"],{span:6},b.a.createElement(A["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("kind",{initialValue:"applicant",rules:[{message:"\u641c\u7d22\u7c7b\u578b"}]})(b.a.createElement(R["a"],{placeholder:"\u641c\u7d22\u7c7b\u578b"},b.a.createElement(W,{value:"applicant"},"\u59d4\u6258\u4eba"),b.a.createElement(W,{value:"shipname"},"\u8239\u540d"),b.a.createElement(W,{value:"sampleno"},"\u6837\u54c1\u7f16\u53f7"),b.a.createElement(W,{value:"samplename"},"\u6837\u54c1\u540d\u79f0"))))),b.a.createElement(d["a"],{span:8},b.a.createElement(Y,null,e("value",{rules:[{message:"\u641c\u7d22\u6570\u636e"}]})(b.a.createElement(z["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),b.a.createElement(d["a"],{md:8,sm:20},b.a.createElement("span",{className:T.a.submitButtons},b.a.createElement(m["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),b.a.createElement(m["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e")))))}}]),a}(x["PureComponent"]),o=s))||o),G=Z;function U(e){return function(){var t,a=w()(e);if($()){var n=w()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return C()(this,t)}}function $(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}A["a"].Item;var _=R["a"].Option,ee=A["a"].create()(G),te=(j=Object(K["connect"])(function(e){var t=e.inspectionAnalysis,a=e.loading;return{inspectionAnalysis:t,loading:a.models.inspectionAnalysis}}),H=A["a"].create(),j(q=H((X=function(e){D()(a,e);var t=U(a);function a(){var e;f()(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return e=t.call.apply(t,[this].concat(o)),e.state={formValues:{},addMany:!1,modify:!1,onDelete:!1,selectedRowKeys:[],deleteRowKeys:[],data:[],standard:[],itemName:[],onLoad:!1,onDetail:!1,testDetail:null},e.columns=[{title:"\u6307\u6807\u540d\u79f0",dataIndex:"itemC"},{title:"\u82f1\u6587\u540d\u79f0",dataIndex:"itemE"},{title:"\u68c0\u6d4b\u6807\u51c6",dataIndex:"teststandard"},{title:"\u5355\u4f4d",dataIndex:"unit"},{title:"\u64cd\u4f5c",render:function(t,a){return b.a.createElement(x["Fragment"],null,b.a.createElement("a",{onClick:function(){return e.modifyItem(t,a)}},"\u4fee\u6539\u6807\u51c6 \xa0\xa0"),b.a.createElement("a",{onClick:function(){return e.deleteOne(t,a)}},"\u5220\u9664"))}}],e.columns2=[{title:"\u6307\u6807\u540d\u79f0",dataIndex:"itemC"},{title:"\u82f1\u6587\u540d\u79f0",dataIndex:"itemE"},{title:"\u68c0\u6d4b\u6807\u51c6",dataIndex:"teststandard"},{title:"\u5355\u4f4d",dataIndex:"unit"}],e.modifyItem=function(t){var a=e.props,n=a.dispatch,o=a.form,s=sessionStorage.getItem("cargoname");JSON.parse(localStorage.getItem("userinfo"));n({type:"inspectionAnalysis/getTestStandard",payload:{cargoname:s,item:t.itemC}}),o.setFieldsValue(y()({},"teststandard",t.teststandard)),e.setState({testDetail:t}),e.setState({modify:!0})},e.modify=function(t){var a=e.state.testDetail,n=a,o=e.props,s=o.dispatch,i=o.form;i.validateFields(function(e,t){console.log(e),e||(n.teststandard=i.getFieldValue("teststandard"),s({type:"inspectionAnalysis/modifyDetail",payload:n,callback:function(e){200===e.code?u["a"].open({message:"\u4fee\u6539\u6210\u529f"}):u["a"].open({message:"\u4fee\u6539\u5931\u8d25",description:e.message})}}))}),i.resetFields(),e.setState({modify:!1})},e.deleteOne=function(t){p["a"].confirm({title:"\u786e\u5b9a\u5220\u9664\u6b64\u6307\u6807\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){var a=e.props.dispatch;a({type:"inspectionAnalysis/deleteDetailItem",payload:{keyno:t.keyno},callback:function(t){200===t.code?(e.componentDidMount(),u["a"].open({message:"\u5220\u9664\u6210\u529f"})):u["a"].open({message:"\u5220\u9664\u5931\u8d25",description:t.data})}})}})},e.deleteItem=function(t){var a=e.props.dispatch,n=[];n.push(t.keyno),a({type:"inspectionAnalysis/deleteDetails",payload:{deleteRowKeys:n},callback:function(t){200===t.code?(e.componentDidMount(),u["a"].open({message:"\u5220\u9664\u6210\u529f"})):u["a"].open({message:"\u5220\u9664\u5931\u8d25",description:t.data})}})},e.columns1=[{title:"\u59d4\u6258\u65e5\u671f",dataIndex:"reportdate"},{title:"\u59d4\u6258\u4eba",dataIndex:"applicant"},{title:"\u68c0\u67e5\u54c1\u540d",dataIndex:"cargoname"},{title:"\u6837\u54c1\u540d\u79f0",dataIndex:"samplename"},{title:"\u6837\u54c1\u7f16\u53f7",dataIndex:"sampleno"},{title:"\u64cd\u4f5c",render:function(t,a){return b.a.createElement(x["Fragment"],null,b.a.createElement("a",{onClick:function(){return e.loadItem(t,a)}},"\u5bfc\u5165"),"\xa0\xa0",b.a.createElement("a",{onClick:function(){return e.detailItem(t,a)}},"\u67e5\u770b"))}}],e.loadItem=function(t){var a=e.props.dispatch,n=sessionStorage.getItem("reportno"),o=sessionStorage.getItem("sampleno"),s=sessionStorage.getItem("cargoname");a({type:"inspectionAnalysis/loadDetails",payload:{targetReportNo:n,targetSampleNo:o,sourceReportNo:t.reportno,sourceSampleNo:t.sampleno,cargonameC:s},callback:function(t){200===t.code?(e.componentDidMount(),u["a"].open({message:"\u5bfc\u5165\u6210\u529f"})):u["a"].open({message:"\u5bfc\u5165\u5931\u8d25",description:t.message})}}),e.handleCancel()},e.detailItem=function(t){var a=e.props.dispatch,n=t.reportno,o=t.sampleno;a({type:"inspectionAnalysis/getDetails",payload:{reportno:n,sampleno:o}}),e.setState({onDetail:!0})},e.columns3=[{title:"\u6307\u6807\u540d\u79f0",dataIndex:"itemC"},{title:"\u82f1\u6587\u540d\u79f0",dataIndex:"itemE"},{title:"\u68c0\u6d4b\u6807\u51c6",dataIndex:"teststandard"},{title:"\u5355\u4f4d",dataIndex:"unit"}],e.back=function(){O.a.push({pathname:"/InspectionAnalysis/SampleIndex"})},e.handleCancel=function(){e.setState({modify:!1}),e.setState({addMany:!1}),e.setState({onDelete:!1}),e.setState({onLoad:!1}),e.componentDidMount()},e.handleCancelDetail=function(){e.setState({onDetail:!1})},e.showAddMany=function(){var t=e.props,a=t.dispatch,n=(t.form,sessionStorage.getItem("reportno")),o=sessionStorage.getItem("sampleno"),s=sessionStorage.getItem("cargoname");e.setState({addMany:!0}),a({type:"inspectionAnalysis/getItems",payload:{reportno:n,sampleno:o,cargonameC:s}}),e.setState({selectedRowKeys:[]})},e.showDelete=function(){e.setState({onDelete:!0}),e.setState({deleteRowKeys:[]})},e.onSelectChange=function(t){e.setState({selectedRowKeys:t})},e.onDeleteChange=function(t){e.setState({deleteRowKeys:t})},e.delete=function(){var t=e.state.deleteRowKeys,a=e.props.dispatch;a({type:"inspectionAnalysis/deleteDetails",payload:{deleteRowKeys:t},callback:function(t){200===t.code?(e.componentDidMount(),u["a"].open({message:"\u5220\u9664\u6210\u529f"})):u["a"].open({message:"\u5220\u9664\u5931\u8d25",description:t.data})}}),e.setState({onDelete:!1})},e.handleChange=function(t){var a=e.props,n=a.dispatch,o=a.form,s=sessionStorage.getItem("cargoname");n({type:"inspectionAnalysis/getStandards",payload:{itemC:t,cargonameC:s},callback:function(t){e.setState({standard:t.data})}}),o.setFieldsValue({standard:null})},e.addMany=function(){var t=sessionStorage.getItem("reportno"),a=sessionStorage.getItem("sampleno"),n=sessionStorage.getItem("cargoname"),o=e.state.selectedRowKeys,s=e.props,i=s.dispatch;s.inspectionAnalysis.items;i({type:"inspectionAnalysis/addDetails",payload:{reportno:t,sampleno:a,cargonameC:n,selectedRowKeys:o},callback:function(t){200===t.code?(u["a"].open({message:"\u6dfb\u52a0\u6210\u529f"}),e.componentDidMount()):u["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:t.data})}}),e.setState({addMany:!1})},e.showLoad=function(){e.setState({onLoad:!0});var t=sessionStorage.getItem("applicant"),a=sessionStorage.getItem("cargoname"),n=JSON.parse(localStorage.getItem("userinfo")).certCode;console.log(a);var o=e.props.dispatch;o({type:"inspectionAnalysis/getSamplesByFilter",payload:{kind:"applicant",value:t,cargoname:a,certCode:n}})},e}return v()(a,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t=sessionStorage.getItem("reportno"),a=sessionStorage.getItem("sampleno");e({type:"inspectionAnalysis/getAllDetails",payload:{reportno:t,sampleno:a}})}},{key:"render",value:function(){var e=this.props,t=e.inspectionAnalysis,a=t.detail,n=t.items,o=t.reportSample,s=t.details,u=t.testStandards,g=e.loading,y=e.form.getFieldDecorator,h=this.state,f=h.addMany,S=h.onDelete,v=h.selectedRowKeys,E=h.standard,C=h.itemName,I=h.deleteRowKeys,w=h.onLoad,k=h.onDetail,D=h.modify,x=u.map(function(e){return b.a.createElement(_,{key:e.standard,value:e.standard},e.standard)}),K=sessionStorage.getItem("reportno"),M=sessionStorage.getItem("cargoname"),O=sessionStorage.getItem("sampleno"),N=sessionStorage.getItem("applicant"),z={reportno:K,cargoname:M,sampleno:O,applicant:N},J=(E.map(function(e){return b.a.createElement(_,{key:e,value:e},e)}),C.map(function(e){return b.a.createElement(_,{key:e,value:e},e)}),{selectedRowKeys:v,onChange:this.onSelectChange}),B={deleteRowKeys:I,onChange:this.onDeleteChange};return b.a.createElement(F["a"],{text:z},b.a.createElement(i["a"],{bordered:!1},b.a.createElement(r["a"],null,b.a.createElement(d["a"],{sm:22},b.a.createElement(m["a"],{style:{marginBottom:12,marginRight:12},type:"primary",onClick:this.showAddMany},"\u6dfb\u52a0"),b.a.createElement(m["a"],{style:{marginBottom:12,marginRight:12},type:"primary",onClick:this.showDelete},"\u6279\u91cf\u5220\u9664"),b.a.createElement(m["a"],{style:{marginBottom:12,marginRight:12},type:"primary",onClick:this.showLoad},"\u5bfc\u5165")),b.a.createElement(d["a"],{span:2},b.a.createElement(m["a"],{type:"primary",style:{marginLeft:8,paddingLeft:0,paddingRight:15},onClick:this.back},b.a.createElement(c["a"],{type:"left"}),"\u8fd4\u56de"))),b.a.createElement("div",{className:L.a.tableList},b.a.createElement(l["a"],{size:"middle",loading:g,dataSource:a,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns,rowKey:"reportno"})),b.a.createElement(p["a"],{title:"\u6279\u91cf\u6dfb\u52a0",visible:f,onOk:this.addMany,onCancel:this.handleCancel,width:800,okText:"\u6dfb\u52a0"},b.a.createElement(l["a"],{size:"middle",rowKey:"keyno",loading:g,dataSource:n,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns3,rowSelection:J})),b.a.createElement(p["a"],{title:"\u5220\u9664",visible:S,onOk:this.delete,onCancel:this.handleCancel,width:800,okText:"\u5220\u9664"},b.a.createElement(l["a"],{size:"middle",rowKey:"keyno",loading:g,dataSource:a,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns2,rowSelection:B})),b.a.createElement(p["a"],{title:"\u5bfc\u5165",visible:w,onOk:this.handleCancel,onCancel:this.handleCancel,width:800},b.a.createElement("div",{className:L.a.tableListForm},b.a.createElement(ee,{applicant:N,cargoname:M})),b.a.createElement(l["a"],{size:"middle",rowKey:"keyno",loading:g,dataSource:o,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns1})),b.a.createElement(p["a"],{title:"\u4fee\u6539\u6837\u54c1\u6807\u51c6",visible:D,onOk:this.modify,onCancel:this.handleCancel},b.a.createElement(A["a"],null,b.a.createElement(A["a"].Item,{label:"\u68c0\u9a8c\u6807\u51c6"},y("teststandard",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u68c0\u9a8c\u6807\u51c6"}]})(b.a.createElement(R["a"],{showSearch:!0,placeholder:"\u8bf7\u9009\u62e9"},x))))),b.a.createElement(p["a"],{title:"\u6307\u6807\u8be6\u60c5",visible:k,onCancel:this.handleCancelDetail,footer:null,width:500},b.a.createElement(l["a"],{size:"middle",rowKey:"keyno",loading:g,dataSource:s,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns3}))))}}]),a}(x["PureComponent"]),q=X))||q)||q);t["default"]=te}}]);