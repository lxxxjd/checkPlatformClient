(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[45],{"5HWH":function(e,t,a){"use strict";a.r(t);a("IzEo");var r,n,l,o,i=a("bx4M"),s=(a("g9YV"),a("wCAj")),c=a("jehZ"),p=a.n(c),m=(a("BoS7"),a("Sdc0")),u=(a("Pwec"),a("CtXQ")),d=(a("7Kak"),a("9yH6")),g=(a("14J3"),a("BMrR")),h=(a("jCWc"),a("kPKH")),f=a("gWZ8"),v=a.n(f),E=(a("miYZ"),a("tsqr")),y=a("2Taf"),k=a.n(y),b=a("vZ4D"),C=a.n(b),F=a("rlhR"),S=a.n(F),w=a("l4Ni"),I=a.n(w),L=a("ujKo"),M=a.n(L),V=a("MhPg"),A=a.n(V),D=(a("5NDa"),a("5rEg")),N=(a("+L6B"),a("2/Rp")),R=(a("2qtc"),a("kLXV")),O=(a("y8nQ"),a("Vl3Y")),Y=(a("OaEy"),a("2fM7")),T=(a("iQDF"),a("+eQT")),x=a("q1tI"),J=a.n(x),P=a("MuoO"),j=a("3a4m"),B=a.n(j),q=a("wd/R"),z=a.n(q),Q=a("Y2fQ"),H=a("zHco"),K=a("glGN"),Z=a.n(K),W=a("cBtN"),G=a.n(W);function X(e){return function(){var t,a=M()(e);if(U()){var r=M()(this).constructor;t=Reflect.construct(a,arguments,r)}else t=a.apply(this,arguments);return I()(this,t)}}function U(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var $=T["a"].RangePicker,_=Y["a"].Option,ee="YYYY/MM/DD",te=O["a"].create()(function(e){var t=e.form,a=e.modalAddListVisible,r=e.handleAddListVisible,n=e.handleFormAddList,l=e.total,o=(e.priceMaking,e.onFocusApproverusers),i=e.invoiceTitlesOptions,s=e.approverusersOptions,c=e.getRepeatListNo,p=function(){t.validateFields(function(e,a){e||(n(a),t.resetFields(),r())})},m=function(e){void 0===e.signpictureoss&&null===e.signpictureoss&&R["a"].info({title:"\u6240\u9009\u62ac\u5934\u672a\u914d\u7f6e\u76d6\u7ae0\u56fe\u7247",content:"\u8bf7\u7ba1\u7406\u5458\u5728\u201c\u5b57\u5178\u7ba1\u7406-\u53d1\u7968\u4fe1\u606f\u201d\u83dc\u5355\u914d\u7f6e\uff0c\u4e0a\u4f20\u53d1\u7968\u76d6\u7ae0png\u56fe\u7247\uff01",okText:"\u77e5\u9053\u4e86",onOk:function(){}})};return J.a.createElement(R["a"],{destroyOnClose:!0,title:"\u62df\u5236\u6e05\u5355",visible:a,style:{top:100},width:500,onCancel:function(){return r()},footer:[J.a.createElement(N["a"],{type:"primary",onClick:function(){return r()}},"\u5173\u95ed"),J.a.createElement(N["a"],{type:"primary",onClick:function(){return p()}},"\u786e\u8ba4\u62df\u5236")]},J.a.createElement(O["a"],null,J.a.createElement(O["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u603b\u91d1\u989d\uff1a"},t.getFieldDecorator("money",{initialValue:{total:l},rules:[{required:!0}]})(J.a.createElement("label",null,l))),J.a.createElement(O["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u6e05\u5355\u53f7\uff1a"},t.getFieldDecorator("listno",{rules:[{required:!0,validator:c}]})(J.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165\u6e05\u5355\u53f7"}))),J.a.createElement(O["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u5230\u8d26\u8d26\u6237\uff1a"},t.getFieldDecorator("invoiceTitle",{rules:[{required:!0,message:"\u9009\u62e9\u5230\u8d26\u8d26\u6237\uff01"}]})(J.a.createElement(Y["a"],{placeholder:"\u8bf7\u9009\u62e9\u5230\u8d26\u8d26\u6237",onSelect:m},i))),J.a.createElement(O["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u5ba1\u6838\u4eba\uff1a"},t.getFieldDecorator("reviewer",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5ba1\u6838\u4eba"}]})(J.a.createElement(Y["a"],{placeholder:"\u8bf7\u9009\u62e9\u5ba1\u6838\u4eba",onFocus:o},s)))))}),ae=0,re=(r=O["a"].create(),n=Object(P["connect"])(function(e){var t=e.charge,a=e.loading;return{charge:t,loading:a.models.charge}}),r(l=n((o=function(e){A()(a,e);var t=X(a);function a(){var e;k()(this,a);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return e=t.call.apply(t,[this].concat(n)),e.state={priceMaking:[],modalAddListVisible:!1,payer:void 0,total:0,invoiceTitles:[],approverusers:[],isViewonApproverusers:!1},e.columns=[{title:"\u59d4\u6258\u7f16\u53f7",dataIndex:"reportno"},{title:"\u59d4\u6258\u65e5\u671f",dataIndex:"reportdate",render:function(e){return J.a.createElement("span",null,z()(e).format("YYYY-MM-DD"))}},{title:"\u8239\u540d\u6807\u8bc6",dataIndex:"shipname"},{title:"\u68c0\u67e5\u54c1\u540d",dataIndex:"cargoname"},{title:"\u4ed8\u6b3e\u4eba",dataIndex:"payer"},{title:"\u4ef7\u683c",dataIndex:"total"},{title:"\u72b6\u6001",dataIndex:"status"},{title:"\u64cd\u4f5c",render:function(t,a){return J.a.createElement(x["Fragment"],null,J.a.createElement("a",{onClick:function(){return e.mobileItem(t)}},"\u5b9a\u4ef7"),"\xa0\xa0",J.a.createElement("a",{onClick:function(){return e.removeExistItem(t,a)}},"\u5220\u9664"),"\xa0\xa0",J.a.createElement("a",{onClick:function(){return e.previewItem(t,a)}},"\u59d4\u6258\u8be6\u60c5"),"\xa0\xa0")}}],e.init=function(){var t=e.props.dispatch,a=JSON.parse(localStorage.getItem("userinfo"));t({type:"charge/getReportsFetch",payload:{certCode:a.certCode},callback:function(t){t?e.state.priceMaking=t:E["a"].success("\u52a0\u8f7d\u5931\u8d25")}})},e.handleFormReset=function(){var t=e.props.form;t.resetFields(),e.init(),e.flag=0},e.previewItem=function(e){sessionStorage.setItem("reportno",e.reportno),B.a.push({pathname:"/Entrustment/DetailForEntrustment"}),localStorage.setItem("reportDetailNo",e.reportno)},e.removeExistItem=function(t){e.state.exist=e.listRemoveItem(e.state.priceMaking,t.reportno);var a=v()(e.state.priceMaking);e.setState({priceMaking:a.filter(function(e){return e.reportno!==t.reportno})})},e.listRemoveItem=function(e,t){var a=e.length;while(a--)a in e&&e[a]===t&&e.splice(a,1);return e},e.handleSubmit=function(){var t=e.props.dispatch,a=JSON.parse(localStorage.getItem("userinfo")),r={certCode:a.certCode};t({type:"charge/getInvoiceTitleList",payload:r,callback:function(t){if(void 0!==t&&void 0!==t.length&&t.length>0){e.setState({invoiceTitles:t});for(var a=S()(e),r=a.state,n=0,l=0,o=r.priceMaking.length;l<o;l++){if("\u672a\u5b9a\u4ef7"===r.priceMaking[l].status)return void E["a"].error("\u5b58\u5728\u672a\u5b9a\u4ef7\u7684\u6761\u76ee\uff0c\u8bf7\u5b9a\u4ef7\u5b8c\u91cd\u8bd5");void 0!==r.priceMaking[l].payer&&(r.payer=r.priceMaking[l].payer),n+=parseFloat(r.priceMaking[l].total)}e.state.total=n}else E["a"].success("\u8bf7\u914d\u7f6e\u5230\u8d26\u8d26\u6237")}}),t({type:"user/getMan",payload:{certcode:a.certCode,func:"\u6e05\u5355\u5ba1\u6838"},callback:function(t){t?(e.setState({approverusers:t}),e.handleAddListVisible(!0)):E["a"].error("\u672a\u914d\u7f6e\u5ba1\u6838\u4eba\u7528\u6237\u89d2\u8272")}})},e.handleFormAddList=function(t){var a=e.props.dispatch,r=JSON.parse(localStorage.getItem("userinfo")),n={certcode:r.certCode,reviewer:t.reviewer,listman:r.nameC,priceMakings:e.state.priceMaking,listno:t.listno,payer:e.state.payer,invoiceTitle:t.invoiceTitle};a({type:"charge/addListFetch",payload:n,callback:function(e){e?(E["a"].success("\u6536\u8d39\u6e05\u5355\u6dfb\u52a0\u6210\u529f"),sessionStorage.setItem("reportnoForList",JSON.stringify(e)),B.a.push({pathname:"/Charge/DetailList"})):E["a"].error("\u6536\u8d39\u6e05\u5355\u6dfb\u52a0\u5931\u8d25")}})},e.onFocusApproverusers=function(){null!=e.state.approverusers&&0!==e.state.approverusers.length||!1!==e.state.isViewonApproverusers||(R["a"].info({title:"\u672a\u914d\u7f6e\u6e05\u5355\u5ba1\u6838\u7528\u6237\u89d2\u8272",content:"\u8bf7\u7ba1\u7406\u5458\u5728\u201c\u516c\u53f8\u7ba1\u7406-\u7528\u6237\u7ba1\u7406\u201d\u7ed9\u7528\u6237\u4fee\u6539\uff0c\u52a0\u9009\u7528\u6237\u89d2\u8272\uff01\u4e1a\u52a1\u7ecf\u7406\uff0c\u4e1a\u52a1\u526f\u603b\uff0c\u603b\u7ecf\u7406\u89d2\u8272\uff0c\u90fd\u53ef\u6e05\u5355\u5ba1\u6838\u3002",okText:"\u77e5\u9053\u4e86",onOk:function(){}}),e.setState({isViewonApproverusers:!0}))},e.back=function(){B.a.push({pathname:"/Charge/ListFiction"})},e.handleSearch=function(){var t=e.props,a=t.dispatch,r=t.form,n=S()(e);n.state;r.validateFields(function(t,n){if(!t){var l=JSON.parse(localStorage.getItem("userinfo")),o=[],i=[],s=[];void 0!==n.payer&&""!==n.payer&&(o.push("payer"),i.push(n.payer),s.push("=")),void 0!==n.reportdate&&0!==n.reportdate.length&&(o.push("reportdate"),i.push(n.reportdate[0].format("YYYY-MM-DD")),s.push(">="),o.push("reportdate"),i.push(n.reportdate[1].format("YYYY-MM-DD")),s.push("<="));var c=r.getFieldValue("keys");for(var p in c){var m=c[p],u=r.getFieldValue("kinds".concat(m)),d=r.getFieldValue("conditions".concat(m)),g=r.getFieldValue("values".concat(m)),h=r.getFieldValue("check".concat(m));!0===h&&void 0!==u&&void 0!==g&&void 0!==d&&(o.push(u),i.push(g),s.push(d))}var f={kinds:o,values:i,conditions:s,status:n.status,certCode:l.certCode};a({type:"charge/getReportsFetch",payload:f,callback:function(t){t?(e.state.priceMaking=t,E["a"].success("\u67e5\u8be2\u6210\u529f")):E["a"].error("\u67e5\u8be2\u5931\u8d25")}})}})},e.getRepeatListNo=function(t,a,r){void 0!==a&&null!==a&&""!==a||r(Object(Q["formatMessage"])({id:"validation.listno.noexist"}));var n=e.props.dispatch,l=new FormData,o=JSON.parse(localStorage.getItem("userinfo"));l.append("certcode",o.certCode),l.append("listno",a),n({type:"charge/getRepeatListNo",payload:l,callback:function(e){"repeat"===e?r(Object(Q["formatMessage"])({id:"validation.listno.repeat"})):"success"===e?r():r(Object(Q["formatMessage"])({id:"validation.listno.error"}))}})},e.remove=function(t){var a=e.props.form,r=a.getFieldValue("keys");e.props.form.validateFields(function(e,t){}),a.setFieldsValue({keys:r.filter(function(e){return e!==t})})},e.add=function(){var t=e.props.form,a=t.getFieldValue("keys"),r=a.concat(ae++);t.setFieldsValue({keys:r})},e.flag=0,e.handleAdvanceSearch=function(){if(0===e.flag){var t=4;while(t>0)e.add(),t--;e.flag=1}},e.mobileItem=function(e){sessionStorage.setItem("reportno",e.reportno),sessionStorage.setItem("reportdate",e.reportdate),sessionStorage.setItem("applicant",e.applicant),sessionStorage.setItem("cargoname",e.cargoname),sessionStorage.setItem("inspway",e.inspway),sessionStorage.setItem("FinalPriceOrigin","ListFictionAdd"),B.a.push({pathname:"/Charge/FinalPriceDetail"})},e.handleAddListVisible=function(t){e.setState({modalAddListVisible:!!t})},e}return C()(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return J.a.createElement(O["a"],{onSubmit:this.handleSearch,layout:"inline"},J.a.createElement(g["a"],{gutter:{md:6,lg:18,xl:5}},J.a.createElement(h["a"],{md:12,sm:20},J.a.createElement("span",{className:Z.a.submitButtons},J.a.createElement(N["a"],{type:"primary",style:{marginLeft:0},onClick:this.handleFormReset},"\u91cd\u7f6e"),J.a.createElement(N["a"],{type:"primary",style:{marginLeft:8},onClick:this.handleAdvanceSearch},"\u9ad8\u7ea7\u68c0\u7d22"),J.a.createElement(N["a"],{type:"primary",style:{marginLeft:8},onClick:this.handleSearch},"\u67e5\u8be2"),J.a.createElement(N["a"],{type:"primary",style:{marginLeft:8},onClick:this.handleSubmit},"\u62df\u5236"),J.a.createElement(N["a"],{type:"primary",style:{marginLeft:8},onClick:this.back},"\u8fd4\u56de")))),J.a.createElement(g["a"],{gutter:{md:6,lg:18,xl:5}},J.a.createElement(h["a"],{md:8,sm:20},J.a.createElement(O["a"].Item,{label:"\u4ed8\u6b3e\u4eba",labelCol:{span:5},wrapperCol:{span:6}},e("payer",{rules:[{message:"\u8bf7\u8f93\u5165"}]})(J.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),J.a.createElement(h["a"],{md:8,sm:20},J.a.createElement(O["a"].Item,{label:"\u59d4\u6258\u65e5\u671f\uff1a",labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("reportdate",{})(J.a.createElement($,{format:ee})))),J.a.createElement(h["a"],{md:7,sm:20},J.a.createElement(O["a"].Item,{label:"\u6536\u8d39\u72b6\u6001\uff1a",labelCol:{span:5},wrapperCol:{span:6}},e("status",{rules:[{message:"\u8bf7\u8f93\u5165"}],initialValue:"\u5168\u90e8"})(J.a.createElement(d["a"].Group,{buttonStyle:"solid"},J.a.createElement(d["a"].Button,{value:"\u5168\u90e8"},"\u5168\u90e8"),J.a.createElement(d["a"].Button,{value:"\u672a\u5b9a\u4ef7"},"\u672a\u5b9a\u4ef7"),J.a.createElement(d["a"].Button,{value:"\u5df2\u5b9a\u4ef7\u672a\u62df\u5236"},"\u5df2\u5b9a\u4ef7\u672a\u62df\u5236"))))),J.a.createElement(h["a"],{md:1,sm:20},"  ",J.a.createElement(u["a"],{type:"plus-circle",style:{fontSize:24,marginTop:4},theme:"twoTone",twoToneColor:"#00ff00",onClick:this.add}))))}},{key:"render",value:function(){var e=this,t=this.props.loading,a=this.state,r=a.priceMaking,n=a.modalAddListVisible,l=a.total,o=a.payer,c=a.invoiceTitles,d=a.approverusers,f={handleAddListVisible:this.handleAddListVisible,handleFormAddList:this.handleFormAddList,getRepeatListNo:this.getRepeatListNo,onFocusApproverusers:this.onFocusApproverusers},v=c.map(function(e){return J.a.createElement(_,{key:e.namec,value:e.namec},e.namec)}),E=d.map(function(e){return J.a.createElement(_,{key:e.userName,value:e.userName},e.nameC)}),y=this.props.form,k=y.getFieldDecorator,b=y.getFieldValue;k("keys",{initialValue:[]});var C=b("keys"),F=C.map(function(t,a){return J.a.createElement("div",null,a%2===0&&0!==C.length?J.a.createElement(g["a"],{className:G.a.rowClass}):null,J.a.createElement(h["a"],{md:1,sm:20},J.a.createElement(O["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},k("check".concat(t),{initialValue:!0,valuePropName:"checked"})(J.a.createElement(m["a"],{checkedChildren:"\u5f00",unCheckedChildren:"\u5173"})))),J.a.createElement(h["a"],{md:3,sm:20},J.a.createElement(O["a"].Item,{style:{marginRight:8},labelCol:{span:5},wrapperCol:{span:6}},k("kinds".concat(t),{rules:[{message:"\u9009\u62e9\u5b57\u6bb5"}]})(J.a.createElement(Y["a"],{placeholder:"\u9009\u62e9\u5b57\u6bb5"},J.a.createElement(_,{value:"reportno"}," \u59d4\u6258\u7f16\u53f7"),J.a.createElement(_,{value:"reportno20"}," \u81ea\u7f16\u53f7"),J.a.createElement(_,{value:"shipname"},"\u8239\u540d\u6807\u8bc6"),J.a.createElement(_,{value:"applicant"},"\u7533\u8bf7\u4eba"),J.a.createElement(_,{value:"agent"},"\u4ee3\u7406\u4eba"),J.a.createElement(_,{value:"cargoname"},"\u68c0\u67e5\u54c1\u540d"),J.a.createElement(_,{value:"businesssort"},"\u4e1a\u52a1\u5206\u7c7b"),J.a.createElement(_,{value:"businesssource"},"\u4e1a\u52a1\u6765\u6e90"),J.a.createElement(_,{value:"tradeway"},"\u8d38\u6613\u65b9\u5f0f"),J.a.createElement(_,{value:"cargosort"},"\u8d27\u7269\u79cd\u7c7b"),J.a.createElement(_,{value:"inspway"},"\u68c0\u67e5\u9879\u76ee"),J.a.createElement(_,{value:"section"},"\u6267\u884c\u90e8\u95e8"))))),J.a.createElement(h["a"],{md:3,sm:20},J.a.createElement(O["a"].Item,{style:{marginRight:8},labelCol:{span:5},wrapperCol:{span:6}},k("conditions".concat(t),{rules:[{message:"\u9009\u62e9\u6761\u4ef6"}]})(J.a.createElement(Y["a"],{placeholder:"\u9009\u62e9\u6761\u4ef6"},J.a.createElement(_,{value:"="},"\u7b49\u4e8e"),J.a.createElement(_,{value:"!="},"\u4e0d\u7b49\u4e8e"),J.a.createElement(_,{value:"like"},"\u5305\u542b"),J.a.createElement(_,{value:"not like"},"\u4e0d\u5305\u542b"))))),J.a.createElement(h["a"],{md:4,sm:10},J.a.createElement(O["a"].Item,null,k("values".concat(t),{rules:[{message:"\u9009\u62e9\u6570\u503c"}]})(J.a.createElement(D["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),J.a.createElement(h["a"],{md:1,sm:5},C.length>=1?J.a.createElement(u["a"],{style:{fontSize:24,marginLeft:8},type:"minus-circle",theme:"twoTone",twoToneColor:"#ff0000",onClick:function(){return e.remove(t)}}):null))});return J.a.createElement(H["a"],{title:"\u6e05\u5355\u62df\u5236"},J.a.createElement(i["a"],{bordered:!1,size:"small"},J.a.createElement("div",{className:Z.a.tableList},J.a.createElement(O["a"],{onSubmit:this.handleSubmit},J.a.createElement("div",{className:Z.a.tableListForm},this.renderSimpleForm()),J.a.createElement(g["a"],{className:Z.a.tableListForm},F),J.a.createElement(te,p()({},f,{modalAddListVisible:n,priceMaking:r,total:l,payer:o,invoiceTitlesOptions:v,approverusersOptions:E}))),J.a.createElement(s["a"],{style:{marginTop:5},loading:t,dataSource:r,columns:this.columns,rowKey:"reportno",pagination:{showQuickJumper:!0,showSizeChanger:!0}}))))}}]),a}(x["PureComponent"]),l=o))||l)||l);t["default"]=re}}]);