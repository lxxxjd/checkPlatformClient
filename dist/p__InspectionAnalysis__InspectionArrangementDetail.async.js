(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[108],{uFFq:function(e,t,a){"use strict";a.r(t);a("5NDa");var n,o,i,r,s=a("5rEg"),l=(a("giR+"),a("fyUT")),c=(a("7Kak"),a("9yH6")),m=(a("iQDF"),a("+eQT")),p=(a("OaEy"),a("2fM7")),d=(a("IzEo"),a("bx4M")),u=(a("14J3"),a("BMrR")),f=(a("+L6B"),a("2/Rp")),g=(a("Pwec"),a("CtXQ")),y=(a("jCWc"),a("kPKH")),h=(a("g9YV"),a("wCAj")),I=a("p0pE"),v=a.n(I),S=a("eHn4"),E=a.n(S),b=(a("/xke"),a("TeRw")),k=(a("2qtc"),a("kLXV")),x=a("2Taf"),w=a.n(x),C=a("vZ4D"),Y=a.n(C),D=a("l4Ni"),M=a.n(D),T=a("ujKo"),A=a.n(T),O=a("MhPg"),P=a.n(O),N=(a("y8nQ"),a("Vl3Y")),R=a("q1tI"),V=a.n(R),F=a("MuoO"),q=a("zHco"),J=a("RdVf"),B=a.n(J),K=a("wd/R"),L=a.n(K);function j(e){return function(){var t,a=A()(e);if(H()){var n=A()(this).constructor;t=Reflect.construct(a,arguments,n)}else t=a.apply(this,arguments);return M()(this,t)}}function H(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Q=[{key:"tab2",tab:"\u4eba\u5458"}],z=(n=Object(F["connect"])(function(e){var t=e.inspectionAnalysis,a=e.loading;return{inspectionAnalysis:t,loading:a.models.inspectionAnalysis}}),o=N["a"].create(),n(i=o((r=function(e){P()(a,e);var t=j(a);function a(){var e;w()(this,a);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),e.state={operationkey:"tab2",visible:!1,allCompanyName:[],showPrice:!1,modalInfo:{},maininfoText:{}},e.onOperationTabChange=function(t){e.setState({operationkey:t})},e.columns1=[{title:"\u68c0\u9a8c\u5458",dataIndex:"inspman"},{title:"\u624b\u673a",dataIndex:"tel"},{title:"\u4efb\u52a1",dataIndex:"inspway"},{title:"\u5c97\u4f4d",dataIndex:"position"},{title:"\u5de5\u65f6",dataIndex:"manhour"},{title:"\u52b3\u52a1",dataIndex:"labourfee"},{title:"\u8bef\u9910",dataIndex:"lunchfee"},{title:"\u4ea4\u901a",dataIndex:"trafficfee"},{title:"\u5176\u4ed6",dataIndex:"otherfee"},{title:"\u6307\u6d3e\u65e5\u671f",dataIndex:"taskdate",render:function(e){return V.a.createElement("span",null,L()(e).format("YYYY-MM-DD"))}},{title:"\u6307\u6d3e\u4eba",dataIndex:"taskman"}],e.columns2=[{title:"\u68c0\u6d4b\u673a\u6784",dataIndex:"testman",width:"28%"},{title:"\u5206\u5305\u65e5\u671f",dataIndex:"assigndate",render:function(e){return V.a.createElement("span",null,L()(e).format("YYYY-MM-DD"))}},{title:"\u5206\u5305\u4eba",dataIndex:"assignman"},{title:"\u8ba1\u4ef7",dataIndex:"priceway"},{title:"\u5355\u4ef7",dataIndex:"price"},{title:"\u603b\u4ef7",dataIndex:"totalfee"},{title:"\u72b6\u6001",dataIndex:"reviewstatus"},{title:"\u64cd\u4f5c",render:function(t,a){return V.a.createElement(R["Fragment"],null,V.a.createElement("a",{onClick:function(){return e.mobileItem(t,a)}},"\u4fee\u6539\xa0\xa0"),V.a.createElement("a",{onClick:function(){return e.deleteItem(t,a)}},"\u5220\u9664\xa0\xa0"))}}],e.columns22=[{title:"\u68c0\u6d4b\u673a\u6784",dataIndex:"testman"},{title:"\u5206\u5305\u65f6\u95f4",dataIndex:"assigndate",render:function(e){return V.a.createElement("span",null,L()(e).format("YYYY-MM-DD"))}},{title:"\u8ba1\u4ef7\u65b9\u5f0f",dataIndex:"priceway"},{title:"\u5355\u4ef7",dataIndex:"price"},{title:"\u603b\u4ef7",dataIndex:"totalfee"},{title:"\u72b6\u6001",dataIndex:"reviewstatus"}],e.mobileItem=function(t){"\u6309\u5355\u4ef7"===t.priceway?e.setState({showPrice:!0}):e.setState({showPrice:!1}),e.setState({modalInfo:t}),sessionStorage.setItem("reportno",t.reportno),sessionStorage.setItem("sampleno",t.sampleno),sessionStorage.setItem("keyno",t.keyno),e.setState({visible:!0})},e.deleteItem=function(t){var a=e.props.dispatch;k["a"].confirm({title:"\u786e\u5b9a\u5220\u9664\u6b64\u8bb0\u5f55\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a({type:"inspectionAnalysis/deleteTestBySampleNo",payload:{keyno:t.keyno,reportno:t.reportno,sampleno:t.sampleno},callback:function(t){200===t.code?(e.componentDidMount(),b["a"].open({message:"\u5220\u9664\u6210\u529f"})):b["a"].open({message:"\u5220\u9664\u5931\u8d25",description:t.data})}})}})},e.back=function(){e.props.history.goBack()},e.onChange=function(t){"\u6309\u5355\u4ef7"===t.target.value?e.setState({showPrice:!0}):e.setState({showPrice:!1})},e.sumPrice=function(t){var a=e.props.form,n=e.state.maininfoText.quantityd,o=t;if(console.log(n),console.log(o),void 0!==n&&""!==n&&""!==o&&void 0!==o){var i=o*n;i=i.toFixed(2),a.setFieldsValue(E()({},"totalfee",i))}},e.sum=function(){var t=e.props.form,a=t.getFieldValue("price"),n=e.state.maininfoText.quantityd;if(void 0!==n&&""!==n&&""!==a&&void 0!==a){var o=a*n;o=o.toFixed(2),t.setFieldsValue(E()({},"totalfee",o))}},e.handleCancel=function(){e.setState({visible:!1})},e.handleOk=function(){var t=e.props,a=t.form.validateFieldsAndScroll,n=t.dispatch;a(function(t,a){var o=JSON.parse(localStorage.getItem("userinfo")),i=sessionStorage.getItem("reportno"),r=sessionStorage.getItem("sampleno"),s=sessionStorage.getItem("keyno");t||n({type:"inspectionAnalysis/updateTestInfo",payload:v()({},a,{assignman:o.nameC,assignsort:"\u54c1\u8d28\u5206\u5305",reportno:i,sampleno:r,keyno:s}),callback:function(t){200===t.code?(e.componentDidMount(),b["a"].open({message:"\u4fee\u6539\u6210\u529f"})):b["a"].open({message:"\u4fee\u6539\u5931\u8d25",description:t.message})}})}),e.setState({visible:!1});var o=e.props.form;o.resetFields()},e}return Y()(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch,a=JSON.parse(localStorage.getItem("userinfo")).certCode,n=sessionStorage.getItem("reportno"),o=sessionStorage.getItem("sampleno");t({type:"inspectionAnalysis/getTestBySampleNo",payload:{reportno:n,sampleno:o}}),t({type:"inspectionAnalysis/getAllTaskInspman",payload:{reportNo:n,sampleno:o,certCode:a}}),t({type:"inspectionAnalysis/getCompany",payload:{certCode:a},callback:function(t){e.setState({allCompanyName:t})}});var i=JSON.parse(sessionStorage.getItem("InspectionArrangementDetail_Report"));this.setState({maininfoText:i})}},{key:"render",value:function(){var e=this.props,t=e.inspectionAnalysis,a=t.testInfo,n=t.inspman,o=e.loading,i=e.form.getFieldDecorator,r=this.state,I=r.operationkey,v=r.allCompanyName,S=r.showPrice,E=r.visible,b=r.modalInfo,x=v.map(function(e){return V.a.createElement(Option,{key:e,value:e},e)}),w=sessionStorage.getItem("reportno"),C=sessionStorage.getItem("shipname"),Y=sessionStorage.getItem("applicant"),D=sessionStorage.getItem("overallstate_InspectionDetail"),M={reportno:w,shipname:C,applicant:Y},T={tab1:V.a.createElement(h["a"],{pagination:!1,loading:o,dataSource:a,rowKey:"testman",columns:"\u5df2\u53d1\u5e03"===D||"\u7533\u8bf7\u4f5c\u5e9f"===D?this.columns22:this.columns2}),tab2:V.a.createElement(h["a"],{pagination:!1,loading:o,dataSource:n,rowKey:"inspman",columns:this.columns1})};return V.a.createElement(q["a"],{text:M},V.a.createElement(d["a"],{bordered:!1},V.a.createElement(u["a"],null,V.a.createElement(y["a"],{sm:22}),V.a.createElement(y["a"],{span:2},V.a.createElement(f["a"],{type:"primary",style:{marginLeft:8,paddingLeft:0,paddingRight:15},onClick:this.back},V.a.createElement(g["a"],{type:"left"}),"\u8fd4\u56de"))),V.a.createElement(d["a"],{className:B.a.tabsCard,bordered:!1,tabList:Q,onTabChange:this.onOperationTabChange},T[I])),V.a.createElement(k["a"],{title:"\u5206\u5305",visible:E,onOk:this.handleOk,onCancel:this.handleCancel},V.a.createElement(N["a"],null,V.a.createElement(N["a"].Item,{label:"\u5206\u5305\u5b9e\u9a8c\u5ba4"},i("testman",{initialValue:b.testman,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u5305\u5b9e\u9a8c\u5ba4"}]})(V.a.createElement(p["a"],{showSearch:!0,placeholder:"\u8bf7\u9009\u62e9",filterOption:!1,onSearch:this.handleSearch},x))),V.a.createElement(N["a"].Item,{label:"\u5206\u5305\u65e5\u671f"},i("assigndate",{initialValue:L()(b.assigndate,"YYYY-MM-DD"),rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5206\u5305\u65e5\u671f"}]})(V.a.createElement(m["a"],{placeholder:"\u59d4\u6258\u65e5\u671f",style:{width:"100%"},format:"YYYY-MM-DD",getPopupContainer:function(e){return e.parentNode}}))),V.a.createElement(N["a"].Item,{label:"\u8ba1\u4ef7\u65b9\u5f0f"},i("priceway",{initialValue:b.priceway,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u8ba1\u4ef7\u65b9\u5f0f"}]})(V.a.createElement(c["a"].Group,{onChange:this.onChange},V.a.createElement(c["a"],{value:"\u6309\u5355\u4ef7"},"\u6309\u5355\u4ef7"),V.a.createElement(c["a"],{value:"\u6309\u6279\u6b21"},"\u6309\u6279\u6b21")))),!0===S?[V.a.createElement(N["a"].Item,{label:"\u5355\u4ef7"},i("price",{initialValue:b.price,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5355\u4ef7"}]})(V.a.createElement(l["a"],{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u5355\u4ef7",min:0,step:.01,onChange:this.sumPrice})))]:[],V.a.createElement(N["a"].Item,{label:"\u603b\u8ba1\u8d39\u7528"},i("totalfee",{initialValue:b.totalfee,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u603b\u8ba1\u8d39\u7528"}]})(V.a.createElement(l["a"],{style:{width:"100%"},placeholder:"\u8bf7\u8f93\u5165\u5355\u4ef7",min:0,step:.01}))),V.a.createElement(N["a"].Item,{label:" \u5907\u6ce8"},i("inspwaymemo1",{initialValue:b.inspwaymemo1,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5907\u6ce8"}]})(V.a.createElement(s["a"],null))))))}}]),a}(R["PureComponent"]),i=r))||i)||i);t["default"]=z}}]);