(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[121],{"0o3U":function(e,a,t){e.exports={rowClass:"antd-pro-pages-sample-register-sample-destory-rowClass",tableList:"antd-pro-pages-sample-register-sample-destory-tableList",tableListOperator:"antd-pro-pages-sample-register-sample-destory-tableListOperator",tableListForm:"antd-pro-pages-sample-register-sample-destory-tableListForm"}},pKCX:function(e,a,t){"use strict";t.r(a);t("g9YV");var l,n,r,o,s=t("wCAj"),i=t("jehZ"),c=t.n(i),m=(t("Pwec"),t("CtXQ")),u=(t("BoS7"),t("Sdc0")),d=(t("5NDa"),t("5rEg")),p=(t("7Kak"),t("9yH6")),E=(t("IzEo"),t("bx4M")),v=(t("14J3"),t("BMrR")),f=(t("jCWc"),t("kPKH")),h=(t("miYZ"),t("tsqr")),g=t("gWZ8"),y=t.n(g),b=t("2Taf"),k=t.n(b),C=t("vZ4D"),w=t.n(C),I=t("l4Ni"),S=t.n(I),V=t("ujKo"),x=t.n(V),R=t("MhPg"),F=t.n(R),D=(t("OaEy"),t("2fM7")),L=(t("y8nQ"),t("Vl3Y")),M=(t("2qtc"),t("kLXV")),N=(t("bP8k"),t("gFTJ")),Y=(t("+L6B"),t("2/Rp")),O=t("q1tI"),T=t.n(O),z=t("MuoO"),B=t("wd/R"),P=t.n(B),J=t("zHco"),j=t("glGN"),K=t.n(j),q=t("0o3U"),A=t.n(q);function Z(e){return function(){var a,t=x()(e);if(H()){var l=x()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return S()(this,a)}}function H(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Q=function(e){var a=e.modalReviewVisible,t=e.handleModalReviewVisible,l=e.modalInfo,n=function(e){return void 0!==e&&null!==e?T.a.createElement("span",null,P()(e).format("YYYY-MM-DD")):null},r=n(l.makingdate);return T.a.createElement(M["a"],{destroyOnClose:!0,title:"\u67e5\u770b\u6837\u54c1\u8be6\u60c5",visible:a,style:{top:100},width:800,onCancel:function(){return t()},footer:[T.a.createElement(Y["a"],{type:"primary",onClick:function(){return t()}},"\u5173\u95ed")]},T.a.createElement(N["a"],{bordered:!0},T.a.createElement(N["a"].Item,{label:"\u59d4\u6258\u7f16\u53f7"},l.reportno),T.a.createElement(N["a"].Item,{label:"\u8239\u540d\u6807\u8bc6"},l.shipname),T.a.createElement(N["a"].Item,{label:"\u68c0\u67e5\u54c1\u540d"},l.cargoname),T.a.createElement(N["a"].Item,{label:"\u6837\u54c1\u7f16\u53f7"},l.cargoname),T.a.createElement(N["a"].Item,{label:"\u6837\u54c1\u540d\u79f0"},l.samplename),T.a.createElement(N["a"].Item,{label:"\u6837\u54c1\u7528\u9014"},l.sampleuse),T.a.createElement(N["a"].Item,{label:"\u6301\u6709\u4eba"},l.duration),T.a.createElement(N["a"].Item,{label:"\u4fdd\u5b58\u5929\u6570"},l.reportno),T.a.createElement(N["a"].Item,{label:"\u5b58\u653e\u4f4d\u7f6e"},l.position),T.a.createElement(N["a"].Item,{label:"\u5236\u5907\u65e5\u671f"},r),T.a.createElement(N["a"].Item,{label:"\u72b6\u6001"},l.status)))},X=0,G=L["a"].Item,U=D["a"].Option,W=(l=Object(z["connect"])(function(e){var a=e.sample,t=e.loading;return{sample:a,loading:t.models.sample}}),n=L["a"].create(),l(r=n((o=function(e){F()(t,e);var a=Z(t);function t(){var e;k()(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return e=a.call.apply(a,[this].concat(n)),e.state={formValues:{},exist:[],dataSource:[],modalReviewVisible:!1,modalInfo:{}},e.columns=[{title:"\u59d4\u6258\u7f16\u53f7",dataIndex:"reportno"},{title:"\u8239\u540d\u6807\u8bc6",dataIndex:"shipname"},{title:"\u68c0\u67e5\u54c1\u540d",dataIndex:"cargoname"},{title:"\u6837\u54c1\u7f16\u53f7",dataIndex:"sampleno"},{title:"\u6837\u54c1\u540d\u79f0",dataIndex:"samplename"},{title:"\u6837\u54c1\u7528\u9014",dataIndex:"sampleuse"},{title:"\u6301\u6709\u4eba",dataIndex:"owner"},{title:"\u4fdd\u5b58\u5929\u6570",dataIndex:"duration"},{title:"\u5b58\u653e\u4f4d\u7f6e",dataIndex:"position"},{title:"\u5236\u5907\u65e5\u671f",dataIndex:"makingdate",render:function(e){return T.a.createElement("span",null,P()(e).format("YYYY-MM-DD"))}},{title:"\u72b6\u6001",dataIndex:"status"},{title:"\u64cd\u4f5c",render:function(a,t){return T.a.createElement(O["Fragment"],null,T.a.createElement("a",{onClick:function(){return e.handleReview(!0,a)}},"\u67e5\u770b"),"\xa0\xa0",T.a.createElement("a",{onClick:function(){return e.removeExistItem(a,t)}},"\u5220\u9664"))}}],e.init=function(){var a=JSON.parse(localStorage.getItem("userinfo")),t=e.props.dispatch,l={certCode:a.certCode};t({type:"sample/selectSampleByConditionsDestory",payload:l,callback:function(a){a&&e.saveExist(a)}})},e.saveExist=function(a){for(var t=a.list,l=[],n=0;n<t.length;n++)l.push(t[n].sampleno);e.state.exist=l,e.state.dataSource=a.list},e.toCustomerDetail=function(e){console.log(e)},e.listRemoveItem=function(e,a){var t=e.length;while(t--)t in e&&e[t]===a&&e.splice(t,1);return e},e.removeExistItem=function(a){e.state.exist=e.listRemoveItem(e.state.exist,a.sampleno);var t=y()(e.state.dataSource);e.setState({dataSource:t.filter(function(e){return e.sampleno!==a.sampleno})})},e.handleFormReset=function(){var a=e.props.form;a.resetFields(),e.setState({formValues:{}}),e.init(),e.flag=0},e.destoryExist=function(){e.setDestoryStatus("\u9500\u6bc1","\u9500\u6bc1\u6210\u529f","\u9500\u6bc1\u5931\u8d25")},e.setDestoryStatus=function(a,t,l){var n=e.props.dispatch,r={exist:e.state.exist,status:a};n({type:"sample/setSampleStatus",payload:r,callback:function(n){n&&("success"===n?function(){for(var l=e.state,n=l.dataSource,r=l.exist,o=function(e){n.find(function(a){return a.sampleno===r[e]}).status=a},s=0;s<r.length;s++)o(s);h["a"].success(t)}():h["a"].success(l))}})},e.undestory=function(){e.setDestoryStatus(void 0,"\u672a\u9500\u6bc1\u6210\u529f","\u672a\u9500\u6bc1\u5931\u8d25")},e.handleSearch=function(a){a.preventDefault();var t=e.props,l=t.dispatch,n=t.form;n.validateFields(function(a,t){if(a)console.log(a);else{var r=JSON.parse(localStorage.getItem("userinfo")),o=[],s=[],i=[];!0===t.check&&void 0!==t.kind&&void 0!==t.value&&void 0!==t.condition&&(o.push(t.kind),s.push(t.value),i.push(t.condition));var c=n.getFieldValue("keys");for(var m in c){var u=c[m];console.log(u);var d=n.getFieldValue("kinds".concat(u)),p=n.getFieldValue("conditions".concat(u)),E=n.getFieldValue("values".concat(u)),v=n.getFieldValue("check".concat(u));!0===v&&void 0!==d&&void 0!==E&&void 0!==p&&(o.push(d),s.push(E),i.push(p))}var f={kinds:o,values:s,conditions:i,certCode:r.certCode,duration:t.duration,status:t.status};l({type:"sample/selectSampleByConditionsDestory",payload:f,callback:function(a){a&&e.saveExist(a)}})}})},e.remove=function(a){var t=e.props.form,l=t.getFieldValue("keys");e.props.form.validateFields(function(e,a){}),t.setFieldsValue({keys:l.filter(function(e){return e!==a})})},e.add=function(){var a=e.props.form,t=a.getFieldValue("keys"),l=t.concat(X++);a.setFieldsValue({keys:l})},e.handleReview=function(a,t){e.handleModalReviewVisible(a),e.state.modalInfo=t},e.handleModalReviewVisible=function(a){e.setState({modalReviewVisible:!!a})},e.flag=0,e.handleAdvanceSearch=function(){if(0===e.flag){var a=4;while(a>0)e.add(),a--;e.flag=1}},e}return w()(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return T.a.createElement(L["a"],{onSubmit:this.handleSearch,layout:"inline"},T.a.createElement(E["a"],{bordered:!1,size:"small"},T.a.createElement(v["a"],{gutter:16},T.a.createElement(f["a"],{span:24},T.a.createElement(Y["a"],{type:"primary",onClick:this.destoryExist},"\u9500\u6bc1"),T.a.createElement(Y["a"],{type:"primary",style:{marginLeft:8},onClick:this.undestory},"\u672a\u9500\u6bc1"),T.a.createElement(Y["a"],{onClick:this.handleFormReset,style:{marginLeft:8}},"\u91cd\u7f6e"),T.a.createElement(Y["a"],{style:{marginLeft:8},onClick:this.handleAdvanceSearch},"\u9ad8\u7ea7\u68c0\u7d22"),T.a.createElement(Y["a"],{type:"primary",style:{marginLeft:8},htmlType:"submit"},"\u67e5\u8be2")))),T.a.createElement(v["a"],null,T.a.createElement(f["a"],{md:6,sm:10},T.a.createElement(L["a"].Item,{label:"\u72b6\u6001\uff1a",labelCol:{span:5},wrapperCol:{span:4}},e("status",{initialValue:"\u5168\u90e8"})(T.a.createElement(p["a"].Group,{defaultValue:"\u5168\u90e8",buttonStyle:"solid"},T.a.createElement(p["a"].Button,{value:"\u5168\u90e8"},"\u5168\u90e8"),T.a.createElement(p["a"].Button,{value:"\u9500\u6bc1"},"\u9500\u6bc1"),T.a.createElement(p["a"].Button,{value:"\u672a\u9500\u6bc1"},"\u672a\u9500\u6bc1"))))),T.a.createElement(f["a"],{md:4,sm:10},T.a.createElement(L["a"].Item,{label:"\u8d85\u4fdd\u5b58\u671f\uff1a",labelCol:{span:5},wrapperCol:{span:4},colon:!1},e("duration",{rules:[{required:!1,pattern:new RegExp(/^[1-9]\d*$/,"g"),message:"\u8f93\u5165\u6570\u5b57"}]})(T.a.createElement(d["a"],{placeholder:"\u5929\u6570"})))),T.a.createElement(f["a"],{md:2,sm:10}),T.a.createElement(f["a"],{md:1,sm:20},T.a.createElement(L["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("check",{initialValue:!0,valuePropName:"checked"})(T.a.createElement(u["a"],{checkedChildren:"\u5f00",unCheckedChildren:"\u5173"})))),T.a.createElement(f["a"],{md:3,sm:10},T.a.createElement(L["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("kind",{rules:[{message:"\u9009\u62e9\u5b57\u6bb5"}]})(T.a.createElement(D["a"],{placeholder:"\u9009\u62e9\u5b57\u6bb5"},T.a.createElement(U,{value:"reportno"}," \u59d4\u6258\u7f16\u53f7"),T.a.createElement(U,{value:"shipname"},"\u8239\u540d\u6807\u8bc6"),T.a.createElement(U,{value:"cargoname"},"\u68c0\u67e5\u54c1\u540d"),T.a.createElement(U,{value:"sampleno"},"\u6837\u54c1\u7f16\u53f7"),T.a.createElement(U,{value:"samplename"},"\u6837\u54c1\u540d\u79f0"),T.a.createElement(U,{value:"sampleuse"},"\u6837\u54c1\u7528\u9014"),T.a.createElement(U,{value:"owner"},"\u6301\u6709\u4eba"),T.a.createElement(U,{value:"duration"},"\u4fdd\u5b58\u5929\u6570"),T.a.createElement(U,{value:"position"},"\u5b58\u653e\u4f4d\u7f6e"),T.a.createElement(U,{value:"status"},"\u72b6\u6001"))))),T.a.createElement(f["a"],{md:3,sm:10},T.a.createElement(L["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("condition",{rules:[{message:"\u9009\u62e9\u6761\u4ef6"}]})(T.a.createElement(D["a"],{placeholder:"\u9009\u62e9\u6761\u4ef6"},T.a.createElement(U,{value:"="},"\u7b49\u4e8e"),T.a.createElement(U,{value:"!="},"\u4e0d\u7b49\u4e8e"),T.a.createElement(U,{value:"like"},"\u5305\u542b"),T.a.createElement(U,{value:"not like"},"\u4e0d\u5305\u542b"))))),T.a.createElement(f["a"],{md:3,sm:10},T.a.createElement(G,null,e("value",{rules:[{message:"\u9009\u62e9\u6570\u503c"}]})(T.a.createElement(d["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),T.a.createElement(f["a"],{md:2,sm:10},T.a.createElement("span",null,T.a.createElement(m["a"],{type:"plus-circle",style:{fontSize:24,marginTop:4,marginLeft:16},theme:"twoTone",twoToneColor:"#00ff00",onClick:this.add})))))}},{key:"render",value:function(){var e=this,a=this.props,t=(a.sample.selectRegisterDestory,a.loading),l=this.state.dataSource,n=this.props.form,r=n.getFieldDecorator,o=n.getFieldValue;r("keys",{initialValue:[]});var i=o("keys"),p=this.state,h=p.modalReviewVisible,g=p.modalInfo,y={handleModalReviewVisible:this.handleModalReviewVisible},b=i.map(function(a,t){return T.a.createElement("div",null,t%2===0&&0!==i.length?T.a.createElement(v["a"],{className:A.a.rowClass}):null,T.a.createElement(f["a"],{md:1,sm:20},T.a.createElement(L["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},r("check".concat(a),{initialValue:!0,valuePropName:"checked"})(T.a.createElement(u["a"],{checkedChildren:"\u5f00",unCheckedChildren:"\u5173"})))),T.a.createElement(f["a"],{md:3,sm:10},T.a.createElement(L["a"].Item,{style:{marginRight:8},labelCol:{span:5},wrapperCol:{span:6}},r("kinds".concat(a),{rules:[{message:"\u9009\u62e9\u5b57\u6bb5"}]})(T.a.createElement(D["a"],{placeholder:"\u9009\u62e9\u5b57\u6bb5"},T.a.createElement(U,{value:"reportno"}," \u59d4\u6258\u7f16\u53f7"),T.a.createElement(U,{value:"shipname"},"\u8239\u540d\u6807\u8bc6"),T.a.createElement(U,{value:"cargoname"},"\u68c0\u67e5\u54c1\u540d"),T.a.createElement(U,{value:"sampleno"},"\u6837\u54c1\u7f16\u53f7"),T.a.createElement(U,{value:"samplename"},"\u6837\u54c1\u540d\u79f0"),T.a.createElement(U,{value:"sampleuse"},"\u6837\u54c1\u7528\u9014"),T.a.createElement(U,{value:"owner"},"\u6301\u6709\u4eba"),T.a.createElement(U,{value:"duration"},"\u4fdd\u5b58\u5929\u6570"),T.a.createElement(U,{value:"position"},"\u5b58\u653e\u4f4d\u7f6e"),T.a.createElement(U,{value:"status"},"\u72b6\u6001"))))),T.a.createElement(f["a"],{md:3,sm:10},T.a.createElement(L["a"].Item,{style:{marginRight:8},labelCol:{span:5},wrapperCol:{span:6}},r("conditions".concat(a),{rules:[{message:"\u9009\u62e9\u6761\u4ef6"}]})(T.a.createElement(D["a"],{placeholder:"\u9009\u62e9\u6761\u4ef6"},T.a.createElement(U,{value:"="},"\u7b49\u4e8e"),T.a.createElement(U,{value:"!="},"\u4e0d\u7b49\u4e8e"),T.a.createElement(U,{value:"like"},"\u5305\u542b"),T.a.createElement(U,{value:"not like"},"\u4e0d\u5305\u542b"))))),T.a.createElement(f["a"],{md:3,sm:10},T.a.createElement(G,null,r("values".concat(a),{rules:[{message:"\u9009\u62e9\u6570\u503c"}]})(T.a.createElement(d["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),T.a.createElement(f["a"],{md:2,sm:10},i.length>=1?T.a.createElement(m["a"],{style:{fontSize:24,marginLeft:16},type:"minus-circle",theme:"twoTone",twoToneColor:"#ff0000",onClick:function(){return e.remove(a)}}):null))});return T.a.createElement(J["a"],{title:"\u6837\u54c1\u67e5\u8be2"},T.a.createElement(Q,c()({},y,{modalReviewVisible:h,modalInfo:g})),T.a.createElement(E["a"],{bordered:!1,size:"small"},T.a.createElement("div",null,T.a.createElement(L["a"],{onSubmit:this.handleSubmit},T.a.createElement("div",{className:K.a.tableListForm},this.renderSimpleForm()),T.a.createElement(v["a"],{className:K.a.tableListForm},b)),T.a.createElement(s["a"],{className:K.a.tableList,style:{marginTop:10},size:"middle",rowKey:"sampleno",loading:t,dataSource:l,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns}))))}}]),t}(O["PureComponent"]),r=o))||r)||r);a["default"]=W}}]);