(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[128],{"I/H1":function(e,a,t){"use strict";t.r(a);t("IzEo");var l,n,r,o,c=t("bx4M"),s=(t("g9YV"),t("wCAj")),i=t("jehZ"),m=t.n(i),u=(t("14J3"),t("BMrR")),d=(t("Pwec"),t("CtXQ")),p=(t("5NDa"),t("5rEg")),E=(t("jCWc"),t("kPKH")),v=(t("BoS7"),t("Sdc0")),f=t("2Taf"),h=t.n(f),g=t("vZ4D"),y=t.n(g),b=t("l4Ni"),k=t.n(b),C=t("ujKo"),w=t.n(C),I=t("MhPg"),R=t.n(I),S=(t("OaEy"),t("2fM7")),F=(t("y8nQ"),t("Vl3Y")),V=(t("2qtc"),t("kLXV")),D=(t("bP8k"),t("gFTJ")),L=(t("+L6B"),t("2/Rp")),N=t("q1tI"),M=t.n(N),x=t("MuoO"),O=t("3a4m"),Y=t.n(O),J=t("wd/R"),P=t.n(J),T=t("zHco"),q=t("wfHX"),z=t.n(q),B=t("glGN"),j=t.n(B);function H(e){return function(){var a,t=w()(e);if(A()){var l=w()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return k()(this,a)}}function A(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Q=function(e){var a=e.modalReviewVisible,t=e.handleModalReviewVisible,l=e.modalInfo,n=function(e){return void 0!==e&&null!==e?M.a.createElement("span",null,P()(e).format("YYYY-MM-DD")):null},r=n(l.makingdate);return M.a.createElement(V["a"],{destroyOnClose:!0,title:"\u67e5\u770b\u6837\u54c1\u8be6\u60c5",visible:a,style:{top:100},width:800,onCancel:function(){return t()},footer:[M.a.createElement(L["a"],{type:"primary",onClick:function(){return t()}},"\u5173\u95ed")]},M.a.createElement(D["a"],{bordered:!0},M.a.createElement(D["a"].Item,{label:"\u59d4\u6258\u7f16\u53f7"},l.reportno),M.a.createElement(D["a"].Item,{label:"\u8239\u540d\u6807\u8bc6"},l.shipname),M.a.createElement(D["a"].Item,{label:"\u68c0\u67e5\u54c1\u540d"},l.cargoname),M.a.createElement(D["a"].Item,{label:"\u6837\u54c1\u7f16\u53f7"},l.cargoname),M.a.createElement(D["a"].Item,{label:"\u6837\u54c1\u540d\u79f0"},l.samplename),M.a.createElement(D["a"].Item,{label:"\u6837\u54c1\u7528\u9014"},l.sampleuse),M.a.createElement(D["a"].Item,{label:"\u6301\u6709\u4eba"},l.duration),M.a.createElement(D["a"].Item,{label:"\u4fdd\u5b58\u5929\u6570"},l.reportno),M.a.createElement(D["a"].Item,{label:"\u5b58\u653e\u4f4d\u7f6e"},l.position),M.a.createElement(D["a"].Item,{label:"\u5236\u5907\u65e5\u671f"},r),M.a.createElement(D["a"].Item,{label:"\u72b6\u6001"},l.status)))},X=0,K=F["a"].Item,Z=S["a"].Option,G=(l=Object(x["connect"])(function(e){var a=e.cost,t=e.loading;return{cost:a,loading:t.models.cost}}),n=F["a"].create(),l(r=n((o=function(e){R()(t,e);var a=H(t);function t(){var e;h()(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return e=a.call.apply(a,[this].concat(n)),e.state={formValues:{},modalReviewVisible:!1,modalInfo:{},costResult:[]},e.columns=[{title:"\u53d1\u751f\u65e5\u671f",dataIndex:"occurdate",render:function(e){return M.a.createElement("span",null,P()(e).format("YYYY-MM-DD"))}},{title:"\u59d4\u6258\u7f16\u53f7",dataIndex:"reportno"},{title:"\u8d39\u7528\u79cd\u7c7b",dataIndex:"costtype"},{title:"\u8d39\u7528\u540d\u79f0",dataIndex:"costname"},{title:"\u91d1\u989d",dataIndex:"costmoney"},{title:"\u6e05\u5355\u53f7",dataIndex:"paylistno"},{title:"\u63a5\u6536\u4eba",dataIndex:"reciever"},{title:"\u72b6\u6001",dataIndex:"status"},{title:"\u64cd\u4f5c",render:function(a,t){return M.a.createElement(N["Fragment"],null,M.a.createElement("a",{onClick:function(){return e.handleReview(!0,a)}},"\u67e5\u770b"))}}],e.init=function(){var a=JSON.parse(localStorage.getItem("userinfo")),t=e.props.dispatch,l={certCode:a.certCode};t({type:"cost/selectCostByConditions",payload:l,callback:function(a){e.state.costResult=a}})},e.previewItem=function(e){Y.a.push({pathname:"/Entrustment/DetailForEntrustment"}),localStorage.setItem("reportDetailNo",e.reportno)},e.handleFormReset=function(){var a=e.props.form;a.resetFields(),e.init(),e.flag=0},e.handleSearch=function(a){a.preventDefault();var t=e.props,l=t.dispatch,n=t.form;n.validateFields(function(a,t){if(a)console.log(a);else{var r=JSON.parse(localStorage.getItem("userinfo")),o=[],c=[],s=[];!0===t.check&&void 0!==t.kind&&void 0!==t.value&&void 0!==t.condition&&(o.push(t.kind),c.push(t.value),s.push(t.condition));var i=n.getFieldValue("keys");for(var m in i){var u=i[m];console.log(u);var d=n.getFieldValue("kinds".concat(u)),p=n.getFieldValue("conditions".concat(u)),E=n.getFieldValue("values".concat(u)),v=n.getFieldValue("check".concat(u));!0===v&&void 0!==d&&void 0!==E&&void 0!==p&&(o.push(d),c.push(E),s.push(p))}var f={kinds:o,values:c,conditions:s,certCode:r.certCode};l({type:"cost/selectCostByConditions",payload:f,callback:function(a){e.state.costResult=a}})}})},e.handleReview=function(e,a){sessionStorage.setItem("reportno",a.reportno),localStorage.setItem("reportDetailNo",a.reportno),sessionStorage.setItem("CostListDetail_costlist",JSON.stringify(a)),Y.a.push({pathname:"/Statistics/CostQueryDetail"})},e.handleModalReviewVisible=function(a){e.setState({modalReviewVisible:!!a})},e.remove=function(a){var t=e.props.form,l=t.getFieldValue("keys");e.props.form.validateFields(function(e,a){}),t.setFieldsValue({keys:l.filter(function(e){return e!==a})})},e.add=function(){var a=e.props.form,t=a.getFieldValue("keys"),l=t.concat(X++);a.setFieldsValue({keys:l})},e.flag=0,e.handleAdvanceSearch=function(){if(0===e.flag){var a=4;while(a>0)e.add(),a--;e.flag=1}},e}return y()(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return M.a.createElement(F["a"],{onSubmit:this.handleSearch,layout:"inline"},M.a.createElement(u["a"],{gutter:{md:6,lg:18,xl:5}},M.a.createElement(E["a"],{md:1,sm:20},M.a.createElement(F["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("check",{initialValue:!0,valuePropName:"checked"})(M.a.createElement(v["a"],{checkedChildren:"\u5f00",unCheckedChildren:"\u5173"})))),M.a.createElement(E["a"],{md:3,sm:20},M.a.createElement(F["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("kind",{rules:[{message:"\u9009\u62e9\u5b57\u6bb5"}]})(M.a.createElement(S["a"],{placeholder:"\u9009\u62e9\u5b57\u6bb5"},M.a.createElement(Z,{value:"reportno"},"\u59d4\u6258\u7f16\u53f7"),M.a.createElement(Z,{value:"shipname"},"\u8239\u540d\u6807\u8bc6"),M.a.createElement(Z,{value:"cargoname"},"\u68c0\u67e5\u54c1\u540d"),M.a.createElement(Z,{value:"sampleno"},"\u6837\u54c1\u7f16\u53f7"),M.a.createElement(Z,{value:"samplename"},"\u6837\u54c1\u540d\u79f0"),M.a.createElement(Z,{value:"sampleuse"},"\u6837\u54c1\u7528\u9014"),M.a.createElement(Z,{value:"owner"},"\u6301\u6709\u4eba"),M.a.createElement(Z,{value:"duration"},"\u4fdd\u5b58\u5929\u6570"),M.a.createElement(Z,{value:"position"},"\u5b58\u653e\u4f4d\u7f6e"),M.a.createElement(Z,{value:"status"},"\u72b6\u6001"))))),M.a.createElement(E["a"],{md:3,sm:20},M.a.createElement(F["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("condition",{rules:[{message:"\u6761\u4ef6"}]})(M.a.createElement(S["a"],{placeholder:"\u6761\u4ef6"},M.a.createElement(Z,{value:"="},"\u7b49\u4e8e"),M.a.createElement(Z,{value:"!="},"\u4e0d\u7b49\u4e8e"),M.a.createElement(Z,{value:"like"},"\u5305\u542b"),M.a.createElement(Z,{value:"not like"},"\u4e0d\u5305\u542b"))))),M.a.createElement(E["a"],{md:4,sm:20},M.a.createElement(K,null,e("value",{rules:[{message:"\u8bf7\u8f93\u5165"}]})(M.a.createElement(p["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),M.a.createElement(E["a"],{md:1,sm:20},"  ",M.a.createElement(d["a"],{type:"plus-circle",style:{fontSize:24,marginLeft:8,marginTop:4},theme:"twoTone",twoToneColor:"#00ff00",onClick:this.add})),M.a.createElement(E["a"],{md:8,sm:20},M.a.createElement("span",{className:j.a.submitButtons},M.a.createElement(L["a"],{style:{marginLeft:0},onClick:this.handleFormReset},"\u91cd\u7f6e"),M.a.createElement(L["a"],{style:{marginLeft:8},onClick:this.handleAdvanceSearch},"\u9ad8\u7ea7\u68c0\u7d22"),M.a.createElement(L["a"],{type:"primary",style:{marginLeft:8},htmlType:"submit"},"\u67e5\u8be2")))))}},{key:"render",value:function(){var e=this,a=this.props.loading,t=this.props.form,l=t.getFieldDecorator,n=t.getFieldValue;l("keys",{initialValue:[]});var r=n("keys"),o=this.state,i=o.modalReviewVisible,f=o.modalInfo,h=o.costResult,g={handleModalReviewVisible:this.handleModalReviewVisible},y=r.map(function(a,t){return M.a.createElement("div",null,t%2===0&&0!==r.length?M.a.createElement(u["a"],{className:z.a.rowClass}):null,M.a.createElement(E["a"],{md:1,sm:20},M.a.createElement(F["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},l("check".concat(a),{initialValue:!0,valuePropName:"checked"})(M.a.createElement(v["a"],{checkedChildren:"\u5f00",unCheckedChildren:"\u5173",defaultChecked:!0})))),M.a.createElement(E["a"],{md:3,sm:20},M.a.createElement(F["a"].Item,{style:{marginRight:8},labelCol:{span:5},wrapperCol:{span:6}},l("kinds".concat(a),{rules:[{message:"\u9009\u62e9\u5b57\u6bb5"}]})(M.a.createElement(S["a"],{placeholder:"\u9009\u62e9\u5b57\u6bb5"},M.a.createElement(Z,{value:"reportno"}," \u59d4\u6258\u7f16\u53f7"),M.a.createElement(Z,{value:"shipname"},"\u8239\u540d\u6807\u8bc6"),M.a.createElement(Z,{value:"cargoname"},"\u68c0\u67e5\u54c1\u540d"),M.a.createElement(Z,{value:"sampleno"},"\u6837\u54c1\u7f16\u53f7"),M.a.createElement(Z,{value:"samplename"},"\u6837\u54c1\u540d\u79f0"),M.a.createElement(Z,{value:"sampleuse"},"\u6837\u54c1\u7528\u9014"),M.a.createElement(Z,{value:"owner"},"\u6301\u6709\u4eba"),M.a.createElement(Z,{value:"duration"},"\u4fdd\u5b58\u5929\u6570"),M.a.createElement(Z,{value:"position"},"\u5b58\u653e\u4f4d\u7f6e"),M.a.createElement(Z,{value:"status"},"\u72b6\u6001"))))),M.a.createElement(E["a"],{md:3,sm:20},M.a.createElement(F["a"].Item,{style:{marginRight:8},labelCol:{span:5},wrapperCol:{span:6}},l("conditions".concat(a),{rules:[{message:"\u9009\u62e9\u6761\u4ef6"}]})(M.a.createElement(S["a"],{placeholder:"\u9009\u62e9\u6761\u4ef6"},M.a.createElement(Z,{value:"="},"\u7b49\u4e8e"),M.a.createElement(Z,{value:"!="},"\u4e0d\u7b49\u4e8e"),M.a.createElement(Z,{value:"like"},"\u5305\u542b"),M.a.createElement(Z,{value:"not like"},"\u4e0d\u5305\u542b"))))),M.a.createElement(E["a"],{md:4,sm:10},M.a.createElement(K,null,l("values".concat(a),{rules:[{message:"\u9009\u62e9\u6570\u503c"}]})(M.a.createElement(p["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),M.a.createElement(E["a"],{md:1,sm:5},r.length>=1?M.a.createElement(d["a"],{style:{fontSize:24,marginLeft:8},type:"minus-circle",theme:"twoTone",twoToneColor:"#ff0000",onClick:function(){return e.remove(a)}}):null))});return M.a.createElement(T["a"],{title:"\u6837\u54c1\u67e5\u8be2"},M.a.createElement(Q,m()({},g,{modalReviewVisible:i,modalInfo:f})),M.a.createElement(c["a"],{bordered:!1,size:"small"},M.a.createElement(F["a"],{onSubmit:this.handleSubmit},M.a.createElement("div",{className:j.a.tableListForm},this.renderSimpleForm()),M.a.createElement(u["a"],{className:j.a.tableListForm},y)),M.a.createElement("div",{className:j.a.tableList},M.a.createElement(s["a"],{size:"middle",rowKey:"keyno",loading:a,dataSource:h,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns}))))}}]),t}(N["PureComponent"]),r=o))||r)||r);a["default"]=G},wfHX:function(e,a,t){e.exports={rowClass:"antd-pro-pages-statistics-cost-query-rowClass","dynamic-delete-button":"antd-pro-pages-statistics-cost-query-dynamic-delete-button",tableList:"antd-pro-pages-statistics-cost-query-tableList",tableListOperator:"antd-pro-pages-statistics-cost-query-tableListOperator",tableListForm:"antd-pro-pages-statistics-cost-query-tableListForm"}}}]);