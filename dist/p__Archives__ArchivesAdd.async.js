(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{L1Te:function(e,a,t){e.exports={rowClass:"antd-pro-pages-archives-archives-add-rowClass",tableList:"antd-pro-pages-archives-archives-add-tableList",tableListOperator:"antd-pro-pages-archives-archives-add-tableListOperator",tableListForm:"antd-pro-pages-archives-archives-add-tableListForm"}},Nj0G:function(e,a,t){"use strict";t.r(a);t("IzEo");var n,r,l,o,i=t("bx4M"),c=(t("g9YV"),t("wCAj")),s=t("jehZ"),d=t.n(s),u=(t("14J3"),t("BMrR")),m=(t("+L6B"),t("2/Rp")),p=(t("Pwec"),t("CtXQ")),h=(t("jCWc"),t("kPKH")),v=(t("miYZ"),t("tsqr")),f=t("2Taf"),E=t.n(f),y=t("vZ4D"),g=t.n(y),b=t("l4Ni"),w=t.n(b),C=t("ujKo"),S=t.n(C),k=t("MhPg"),D=t.n(k),F=(t("2qtc"),t("kLXV")),V=(t("iQDF"),t("+eQT")),I=(t("5NDa"),t("5rEg")),Y=(t("OaEy"),t("2fM7")),M=(t("y8nQ"),t("Vl3Y")),R=t("q1tI"),L=t.n(R),x=t("MuoO"),A=t("wd/R"),O=t.n(A),K=t("zHco"),N=t("glGN"),T=t.n(N),j=t("L1Te"),z=t.n(j);function J(e){if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=q(e))){var a=0,t=function(){};return{s:t,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,r,l=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){o=!0,r=e},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw r}}}}function q(e,a){if(e){if("string"===typeof e)return B(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?B(e,a):void 0}}function B(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=new Array(a);t<a;t++)n[t]=e[t];return n}function P(e){return function(){var a,t=S()(e);if(Q()){var n=S()(this).constructor;a=Reflect.construct(t,arguments,n)}else a=t.apply(this,arguments);return w()(this,a)}}function Q(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var Z=0,G=M["a"].Item,H=Y["a"].Option,X=M["a"].create()(function(e){var a=e.modalVisible,t=e.form,n=e.handleAdd,r=e.handleModalVisible,l=function(){t.validateFields(function(e,a){e||(t.resetFields(),n(a))})};return L.a.createElement(F["a"],{destroyOnClose:!0,title:"\u7f16\u8f91\u5f52\u6863",visible:a,onOk:l,onCancel:function(){return r()}},L.a.createElement(G,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5f52\u6863\u4f4d\u7f6e"},t.getFieldDecorator("archiveplace",{rules:[{required:!0}]})(L.a.createElement(I["a"],{placeholder:"\u8bf7\u8f93\u5165\u5f52\u6863\u4f4d\u7f6e"}))),L.a.createElement(M["a"].Item,{labelCol:{span:5},wrapperCol:{span:15},label:"\u5f52\u6863\u65f6\u95f4"},t.getFieldDecorator("archivesdate",{rules:[{required:!0}]})(L.a.createElement(V["a"],{style:{width:"100%"},format:"YYYY-MM-DD",placeholder:"\u8bf7\u9009\u62e9\u5f52\u6863\u65f6\u95f4"}))))}),U=(n=Object(x["connect"])(function(e){var a=e.archives,t=e.loading;return{archives:a,loading:t.models.archives}}),r=M["a"].create(),n(l=r((o=function(e){D()(t,e);var a=P(t);function t(){var e;E()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return e=a.call.apply(a,[this].concat(r)),e.state={modalVisible:!1,dataSource:[],selectedRowKeys:[]},e.columns=[{title:"\u59d4\u6258\u7f16\u53f7",dataIndex:"reportno"},{title:"\u59d4\u6258\u65e5\u671f",dataIndex:"reportdate",render:function(e){return L.a.createElement("span",null,O()(e).format("YYYY-MM-DD"))}},{title:"\u59d4\u6258\u4eba",dataIndex:"applicant"},{title:"\u8239\u540d\u6807\u8bc6",dataIndex:"shipname"},{title:"\u68c0\u67e5\u54c1\u540d",dataIndex:"cargoname"},{title:"\u7533\u8bf7\u9879\u76ee",dataIndex:"inspway"},{title:"\u5f52\u6863\u4f4d\u7f6e",dataIndex:"archiveplace"},{title:"\u5f52\u6863/\u9000\u6863\u65e5\u671f",dataIndex:"archivesdate",render:function(a){return e.isValidDate(a)}}],e.isValidDate=function(e){return void 0!==e&&null!==e?L.a.createElement("span",null,O()(e).format("YYYY-MM-DD")):[]},e.init=function(){var a=JSON.parse(localStorage.getItem("userinfo")),t=e.props.dispatch,n={certCode:a.certCode};t({type:"archives/getReportsForArchivesByCondition",payload:n,callback:function(a){a&&(e.state.dataSource=a.data,e.state.selectedRowKeys=[])}})},e.handleFormReset=function(){var a=e.props.form;a.resetFields(),e.init()},e.handleSearch=function(a){a.preventDefault();var t=e.props,n=t.dispatch,r=t.form;r.validateFields(function(a,t){if(!a){var l=JSON.parse(localStorage.getItem("userinfo")),o=[],i=[],c=[];void 0!==t.kind&&void 0!==t.value&&void 0!==t.condition&&(o.push(t.kind),"like"===t.condition||"not like"===t.condition?i.push("%".concat(t.value,"%")):i.push(t.value),c.push(t.condition));var s=r.getFieldValue("keys");for(var d in s){var u=s[d],m=r.getFieldValue("kinds".concat(u)),p=r.getFieldValue("conditions".concat(u)),h=r.getFieldValue("values".concat(u));void 0!==m&&void 0!==h&&void 0!==p&&("like"===p||"not like"===p?i.push("%".concat(h,"%")):i.push(h),o.push(m),c.push(p))}var v={kinds:o,values:i,conditions:c,certCode:l.certCode,startDate:t.startDate,endDate:t.endDate};n({type:"archives/getReportsForArchivesByCondition",payload:v,callback:function(a){a&&(e.state.dataSource=a.data)}})}})},e.remove=function(a){var t=e.props.form,n=t.getFieldValue("keys");e.props.form.validateFields(function(e,a){}),t.setFieldsValue({keys:n.filter(function(e){return e!==a})})},e.add=function(){var a=e.props.form,t=a.getFieldValue("keys"),n=t.concat(Z++);a.setFieldsValue({keys:n})},e.onSelectChange=function(a){e.setState({selectedRowKeys:a})},e.handleAdd=function(a){var t,n=e.props.dispatch,r=e.state,l=r.selectedRowKeys,o=r.dataSource,i=[],c=J(l);try{var s=function(){var e=t.value;o.map(function(t){return t.reportno===e?(t.archiveplace=a.archiveplace,t.archivesdate=a.archivesdate,i.push(t),t):t})};for(c.s();!(t=c.n()).done;)s()}catch(e){c.e(e)}finally{c.f()}n({type:"archives/addArchivesFetch",payload:{values:i},callback:function(e){e?v["a"].success("\u4fdd\u5b58\u6210\u529f"):v["a"].error("\u4fdd\u5b58\u5931\u8d25")}}),e.setState({modalVisible:!1})},e.handleModalVisible=function(a){e.setState({modalVisible:!!a})},e}return g()(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return L.a.createElement(M["a"],{onSubmit:this.handleSearch,layout:"inline"},L.a.createElement(u["a"],{gutter:{md:6,lg:18,xl:5}},L.a.createElement(h["a"],{md:3,sm:20},L.a.createElement(M["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("kind",{initialValue:"shipname",rules:[{message:"\u9009\u62e9\u5b57\u6bb5"}]})(L.a.createElement(Y["a"],{placeholder:"\u641c\u7d22\u7c7b\u578b"},L.a.createElement(H,{value:"reportno"},"\u59d4\u6258\u7f16\u53f7"),L.a.createElement(H,{value:"applicant"},"\u59d4\u6258\u4eba"),L.a.createElement(H,{value:"shipname"},"\u8239\u540d\u6807\u8bc6"),L.a.createElement(H,{value:"cargoname"},"\u68c0\u67e5\u54c1\u540d"),L.a.createElement(H,{value:"archiveplace"},"\u5f52\u6863\u4f4d\u7f6e"),L.a.createElement(H,{value:"cargo.cargosort"},"\u8d27\u7269\u79cd\u7c7b"),L.a.createElement(H,{value:"inspectplace"},"\u68c0\u9a8c\u5730\u70b9"),L.a.createElement(H,{value:"section"},"\u6267\u884c\u90e8\u95e8"))))),L.a.createElement(h["a"],{md:2,sm:20},L.a.createElement(M["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("condition",{rules:[{message:"\u9009\u62e9\u6761\u4ef6"}]})(L.a.createElement(Y["a"],{placeholder:"\u9009\u62e9\u6761\u4ef6"},L.a.createElement(H,{value:"="},"\u7b49\u4e8e"),L.a.createElement(H,{value:"!="},"\u4e0d\u7b49\u4e8e"),L.a.createElement(H,{value:"like"},"\u5305\u542b"),L.a.createElement(H,{value:"not like"},"\u4e0d\u5305\u542b"))))),L.a.createElement(h["a"],{md:3,sm:10},L.a.createElement(G,null,e("value",{rules:[{message:"\u9009\u62e9\u6570\u503c"}]})(L.a.createElement(I["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),L.a.createElement(h["a"],{md:1,sm:10},L.a.createElement(p["a"],{type:"plus-circle",style:{fontSize:24,marginLeft:8,marginTop:4},theme:"twoTone",twoToneColor:"#00ff00",onClick:this.add})),L.a.createElement(h["a"],{md:4,sm:20},L.a.createElement(M["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1,label:"\u4ece"},e("startDate",{})(L.a.createElement(V["a"],{placeholder:"\u5f00\u59cb\u65e5\u671f",style:{width:"100%"},format:"YYYY-MM-DD"})))),L.a.createElement(h["a"],{md:4,sm:20},L.a.createElement(M["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1,label:"\u5230"},e("endDate",{})(L.a.createElement(V["a"],{placeholder:"\u7ed3\u675f\u65e5\u671f",style:{width:"100%"},format:"YYYY-MM-DD"})))),L.a.createElement(h["a"],{md:5,sm:20},L.a.createElement("span",{className:T.a.submitButtons},L.a.createElement(m["a"],{type:"primary",style:{marginLeft:45},htmlType:"submit"},"\u67e5\u8be2"),L.a.createElement(m["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),L.a.createElement(m["a"],{type:"primary",style:{marginLeft:8},onClick:this.handleModalVisible},"\u5f52\u6863")))))}},{key:"render",value:function(){var e=this,a=this.props,t=a.loading,n=a.dispatch,r=this.state,l=r.dataSource,o=r.selectedRowKeys,s=this.props.form,m=s.getFieldDecorator,v=s.getFieldValue;m("keys",{initialValue:[]});var f=v("keys"),E={selectedRowKeys:o,onChange:this.onSelectChange,hideDefaultSelections:!0,selections:[{text:"\u5168\u9009",onSelect:function(a){for(var t=[],n=0;n<l.length;n++)t.push(l[n].reportno);e.setState({selectedRowKeys:t})}},{text:"\u5168\u4e0d\u9009",onSelect:function(a){e.setState({selectedRowKeys:[]})}}]},y=this.state.modalVisible,g={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},b=f.map(function(a,t){return L.a.createElement("div",null,t%2===0&&0!==f.length?L.a.createElement(u["a"],{className:z.a.rowClass}):null,L.a.createElement(h["a"],{md:3,sm:20},L.a.createElement(M["a"].Item,{style:{marginRight:8},labelCol:{span:5},wrapperCol:{span:6}},m("kinds".concat(a),{rules:[{message:"\u9009\u62e9\u5b57\u6bb5"}]})(L.a.createElement(Y["a"],{placeholder:"\u641c\u7d22\u7c7b\u578b"},L.a.createElement(H,{value:"reportno"},"\u59d4\u6258\u7f16\u53f7"),L.a.createElement(H,{value:"applicant"},"\u59d4\u6258\u4eba"),L.a.createElement(H,{value:"shipname"},"\u8239\u540d\u6807\u8bc6"),L.a.createElement(H,{value:"cargoname"},"\u68c0\u67e5\u54c1\u540d"),L.a.createElement(H,{value:"archiveplace"},"\u5f52\u6863\u4f4d\u7f6e"),L.a.createElement(H,{value:"cargo.cargosort"},"\u8d27\u7269\u79cd\u7c7b"),L.a.createElement(H,{value:"inspectplace"},"\u68c0\u9a8c\u5730\u70b9"),L.a.createElement(H,{value:"section"},"\u6267\u884c\u90e8\u95e8"))))),L.a.createElement(h["a"],{md:4,sm:20},L.a.createElement(M["a"].Item,{style:{marginRight:8},labelCol:{span:5},wrapperCol:{span:6}},m("conditions".concat(a),{rules:[{message:"\u9009\u62e9\u6761\u4ef6"}]})(L.a.createElement(Y["a"],{placeholder:"\u9009\u62e9\u6761\u4ef6"},L.a.createElement(H,{value:"="},"\u7b49\u4e8e"),L.a.createElement(H,{value:"!="},"\u4e0d\u7b49\u4e8e"),L.a.createElement(H,{value:"like"},"\u5305\u542b"),L.a.createElement(H,{value:"not like"},"\u4e0d\u5305\u542b"))))),L.a.createElement(h["a"],{md:4,sm:10},L.a.createElement(G,null,m("values".concat(a),{rules:[{message:"\u9009\u62e9\u6570\u503c"}]})(L.a.createElement(I["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),L.a.createElement(h["a"],{md:1,sm:5},f.length>=1?L.a.createElement(p["a"],{style:{fontSize:24,marginLeft:8},type:"minus-circle",theme:"twoTone",twoToneColor:"#ff0000",onClick:function(){return e.remove(a)}}):null))});return L.a.createElement(K["a"],{title:"\u6837\u54c1\u67e5\u8be2"},L.a.createElement(X,d()({},g,{modalVisible:y,dispatch:n})),L.a.createElement(i["a"],{bordered:!1,size:"small"},L.a.createElement("div",null,L.a.createElement(M["a"],{onSubmit:this.handleSubmit},L.a.createElement("div",{className:T.a.tableListForm},this.renderSimpleForm()),L.a.createElement(u["a"],{className:T.a.tableListForm},b)),L.a.createElement(c["a"],{className:T.a.tableList,size:"middle",rowKey:"reportno",loading:t,dataSource:l,pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns,rowSelection:E}))))}}]),t}(R["PureComponent"]),l=o))||l)||l);a["default"]=U}}]);