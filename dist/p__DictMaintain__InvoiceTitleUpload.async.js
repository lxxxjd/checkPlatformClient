(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[74],{"97RF":function(e,t,n){"use strict";n.r(t);n("IzEo");var a,i,r,l,o=n("bx4M"),c=(n("14J3"),n("BMrR")),s=(n("jCWc"),n("kPKH")),u=(n("+L6B"),n("2/Rp")),p=(n("DZo9"),n("8z0m")),f=(n("Pwec"),n("CtXQ")),d=(n("2qtc"),n("kLXV")),m=n("d6i3"),v=n.n(m),h=n("1l/V"),g=n.n(h),y=(n("/xke"),n("TeRw")),w=n("2Taf"),b=n.n(w),k=n("vZ4D"),E=n.n(k),C=n("l4Ni"),S=n.n(C),F=n("ujKo"),I=n.n(F),P=n("MhPg"),L=n.n(P),R=(n("y8nQ"),n("Vl3Y")),D=n("q1tI"),M=n.n(D),T=n("MuoO"),U=n("zHco");function x(e){return function(){var t,n=I()(e);if(B()){var a=I()(this).constructor;t=Reflect.construct(n,arguments,a)}else t=n.apply(this,arguments);return S()(this,t)}}function B(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function j(e){return new Promise(function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}})}var O=(a=R["a"].create(),i=Object(T["connect"])(function(e){var t=e.dict,n=e.loading;return{dict:t,loading:n.models.dict}}),a(r=i((l=function(e){L()(n,e);var t=x(n);function n(){var e;b()(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return e=t.call.apply(t,[this].concat(i)),e.state={visible:!1,previewVisible:!1,previewImage:"",fileList:[],pictureUrl:""},e.handleOk=function(){var t=e.props,n=t.form.validateFieldsAndScroll,a=t.dispatch,i=sessionStorage.getItem("invoiceTitle_keyno");n(function(t,n){if(!t){var r=new FormData;n.MultipartFile.fileList.forEach(function(e){r.append("multipartFile",e.originFileObj)}),r.append("keyno",i),a({type:"dict/uploadInvoiceTitle",payload:r,callback:function(t){400===t.code?y["a"].open({message:"\u6dfb\u52a0\u5931\u8d25",description:t.data}):e.componentDidMount()}}),e.setState({visible:!1})}})},e.showSign=function(){var t=e.props.form;t.resetFields(),e.setState({fileList:[]}),e.setState({visible:!0})},e.handleCancel=function(){var t=e.props.form;t.resetFields(),e.setState({visible:!1})},e.Cancel=function(){return e.setState({previewVisible:!1})},e.handlePreview=function(){var t=g()(v.a.mark(function t(n){return v.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(n.url||n.preview){t.next=4;break}return t.next=3,j(n.originFileObj);case 3:n.preview=t.sent;case 4:e.setState({previewImage:n.url||n.preview,previewVisible:!0});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var n=t.file,a=t.fileList,i="image/jpg"===n.type,r="image/jpeg"===n.type,l="image/gif"===n.type,o="image/png"===n.type,c=n.size/1024/1024<20;i||l||r||o?c?e.setState({fileList:a}):d["a"].error({title:"\u8d85\u8fc720M\u9650\u5236\uff0c\u4e0d\u5141\u8bb8\u4e0a\u4f20~"}):d["a"].error({title:"\u53ea\u80fd\u4e0a\u4f20JPG \u3001GIF \u3001PNG\u3001JPEG\u683c\u5f0f\u7684\u56fe\u7247~"})},e.handleBeforeUpload=function(e){return!1},e.back=function(){e.props.history.goBack()},e}return E()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.dispatch,n=sessionStorage.getItem("invoiceTitle_keyno");t({type:"dict/getInvoiceTitleById",payload:{keyno:n},callback:function(n){n&&t({type:"dict/getUrl",payload:{url:n},callback:function(t){200===t.code&&e.setState({pictureUrl:t.data})}})}})}},{key:"render",value:function(){var e=M.a.createElement("div",null,M.a.createElement(f["a"],{type:"plus"}),M.a.createElement("div",{className:"ant-upload-text"},"Upload")),t=this.props,n=(t.loading,t.form.getFieldDecorator),a=this.state,i=a.fileList,r=a.visible,l=a.previewVisible,m=a.previewImage,v=a.pictureUrl;return M.a.createElement(U["a"],null,M.a.createElement(d["a"],{title:"\u56fe\u7247\u4e0a\u4f20",visible:r,onOk:this.handleOk,onCancel:this.handleCancel},M.a.createElement(R["a"],null,M.a.createElement(R["a"].Item,{label:"\u6587\u4ef6\u4e0a\u4f20"},n("MultipartFile",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u4e0a\u4f20\u6587\u4ef6"}]})(M.a.createElement(p["a"],{listType:"picture-card",fileList:i,onPreview:this.handlePreview,beforeUpload:this.handleBeforeUpload,onChange:this.handleChange},i.length>=1?null:e))),M.a.createElement(d["a"],{visible:l,footer:null,onCancel:this.Cancel},M.a.createElement("img",{alt:"example",style:{width:"100%"},src:m})))),M.a.createElement(o["a"],{size:"small"},M.a.createElement(c["a"],null,M.a.createElement(s["a"],{span:22},M.a.createElement(u["a"],{style:{marginBottom:12},type:"primary",onClick:this.showSign},"\u4e0a\u4f20\u53d1\u7968\u76d6\u7ae0\u56fe\u7247")),M.a.createElement(s["a"],{span:2},M.a.createElement(u["a"],{style:{marginBottom:12},type:"primary",onClick:this.back},"\u8fd4\u56de"))),""===v||null===v?[M.a.createElement("div",{style:{marginTop:20,marginLeft:20}},"\u6682\u65e0\u56fe\u7247")]:[M.a.createElement("img",{style:{marginTop:20},src:v,width:"200"})]))}}]),n}(D["PureComponent"]),r=l))||r)||r);t["default"]=O}}]);