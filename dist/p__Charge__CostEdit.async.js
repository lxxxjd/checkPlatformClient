(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{Yx7T:function(e,a,t){"use strict";t.r(a);t("IzEo");var l,r,n,o,c=t("bx4M"),s=(t("g9YV"),t("wCAj")),i=(t("14J3"),t("BMrR")),m=(t("Pwec"),t("CtXQ")),d=(t("+L6B"),t("2/Rp")),u=(t("jCWc"),t("kPKH")),p=t("p0pE"),E=t.n(p),h=t("2Taf"),f=t.n(h),g=t("vZ4D"),v=t.n(g),b=t("l4Ni"),y=t.n(b),C=t("ujKo"),w=t.n(C),I=t("MhPg"),D=t.n(I),F=(t("2qtc"),t("kLXV")),k=(t("iQDF"),t("+eQT")),V=(t("5NDa"),t("5rEg")),M=(t("miYZ"),t("tsqr")),N=(t("OaEy"),t("2fM7")),Y=(t("y8nQ"),t("Vl3Y")),S=t("q1tI"),A=t.n(S),q=t("MuoO"),x=t("3a4m"),O=t.n(x),R=t("wd/R"),L=t.n(R),J=t("zHco"),z=t("glGN"),P=t.n(z);function Q(e){return function(){var a,t=w()(e);if(T()){var l=w()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return y()(this,a)}}function T(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var j=Y["a"].Item,B=N["a"].Option,K=Y["a"].create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleModalVisible,r=e.CostItemData,n=e.dispatch,o=e.init,c=function(){t.validateFields(function(e,a){if(!e){var t=r;t.amout=a.amout,t.costmoney=a.costmoney,t.costname=a.costname,t.costtype=a.costtype,t.occurdate=a.occurdate,t.reciever=a.reciever,t.remark=a.remark,n({type:"charge/updateCostFetch",payload:t,callback:function(e){"success"===e?M["a"].success("\u4fee\u6539\u6210\u529f"):M["a"].success("\u4fee\u6539\u5931\u8d25")}}),l(),o()}})};return A.a.createElement(F["a"],{destroyOnClose:!0,title:"\u4fee\u6539\u6210\u672c",visible:a,onOk:c,onCancel:function(){return l()},width:500,style:{top:100}},A.a.createElement(Y["a"],null,A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u8d39\u7528\u79cd\u7c7b"},t.getFieldDecorator("costtype",{initialValue:r.costtype,rules:[{required:!0,message:"\u9009\u62e9\u8d39\u7528\u79cd\u7c7b"}]})(A.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9\u8d39\u7528\u79cd\u7c7b"},A.a.createElement(B,{value:"\u9910\u996e\u8d39"},"\u9910\u996e\u8d39"),A.a.createElement(B,{value:"\u5dee\u65c5\u8d39"},"\u5dee\u65c5\u8d39"),A.a.createElement(B,{value:"\u5916\u8058\u52b3\u52a1"},"\u5916\u8058\u52b3\u52a1"),A.a.createElement(B,{value:"\u90ae\u5bc4\u8d39"},"\u90ae\u5bc4\u8d39"),A.a.createElement(B,{value:"\u8bef\u652f\u8d39"},"\u8bef\u652f\u8d39"),A.a.createElement(B,{value:"\u8f66\u8f86"},"\u8f66\u8f86"),A.a.createElement(B,{value:"\u8017\u6750"},"\u8017\u6750"),A.a.createElement(B,{value:"\u4eea\u5668\u8bbe\u5907"},"\u4eea\u5668\u8bbe\u5907"),A.a.createElement(B,{value:"\u836f\u54c1\u8bd5\u5242"},"\u836f\u54c1\u8bd5\u5242"),A.a.createElement(B,{value:"\u5176\u4ed6\u8d39"},"\u5176\u4ed6\u8d39")))),A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u8d39\u7528\u540d\u79f0"},t.getFieldDecorator("costname",{initialValue:r.costname,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d39\u7528\u540d\u79f0"}]})(A.a.createElement(V["a"],{placeholder:"\u8bf7\u8f93\u5165\u8d39\u7528\u540d\u79f0"}))),A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u53d1\u751f/\u4f7f\u7528\u65e5\u671f"},t.getFieldDecorator("occurdate",{initialValue:void 0===r.occurdate||null!==r.occurdate?L()(r.occurdate,"YYYY-MM-DD"):{},rules:[{required:!0,message:"\u8bf7\u586b\u5199\u53d1\u751f\u65e5\u671f"}]})(A.a.createElement(k["a"],{style:{width:"100%"},format:"YYYY-MM-DD",placeholder:"\u9009\u62e9\u7533\u8bf7\u65e5\u671f"}))),A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u63a5\u6536/\u4f7f\u7528\u4eba"},t.getFieldDecorator("reciever",{initialValue:r.reciever,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u6536\u4eba"}]})(A.a.createElement(V["a"],{placeholder:"\u8bf7\u8f93\u5165\u63a5\u6536\u4eba"}))),A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u91d1\u989d"},t.getFieldDecorator("costmoney",{initialValue:r.costmoney,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u91d1\u989d"}]})(A.a.createElement(V["a"],{placeholder:"\u8bf7\u8f93\u5165\u91d1\u989d"}))),A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u6570\u91cf"},t.getFieldDecorator("amout",{initialValue:r.amout,rules:[{message:"\u8bf7\u8f93\u5165\u6570\u91cf"}]})(A.a.createElement(V["a"],{placeholder:"\u8bf7\u8f93\u5165\u6570\u91cf"}))),A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u5907\u6ce8"},t.getFieldDecorator("remark",{initialValue:r.remark})(A.a.createElement(V["a"],{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"})))))}),H=Y["a"].create()(function(e){var a=e.modalAddNewVisble,t=e.form,l=e.handleModalAddNewVisible,r=e.dispatch,n=e.init,o=sessionStorage.getItem("reportNoForCostEdit"),c=JSON.parse(localStorage.getItem("userinfo")),s=function(){t.validateFields(function(e,a){if(!e){var t={amout:a.amout,costmoney:a.costmoney,costname:a.costname,costtype:a.costtype,occurdate:a.occurdate,reciever:a.reciever,remark:a.remark,register:c.nameC,reportno:o,status:"\u5df2\u767b\u8bb0"};r({type:"charge/addCostFetch",payload:t,callback:function(e){"success"===e?M["a"].success("\u6210\u672c\u6dfb\u52a0\u6210\u529f"):M["a"].success("\u6210\u672c\u6dfb\u52a0\u5931\u8d25")}}),l(),n()}})};return A.a.createElement(F["a"],{destroyOnClose:!0,title:"\u65b0\u589e\u652f\u51fa",visible:a,onOk:s,onCancel:function(){return l()},width:500,style:{top:10}},A.a.createElement(Y["a"],null,A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u8d39\u7528\u79cd\u7c7b"},t.getFieldDecorator("costtype",{rules:[{required:!0,message:"\u9009\u62e9\u8d39\u7528\u79cd\u7c7b"}]})(A.a.createElement(N["a"],{placeholder:"\u8bf7\u9009\u62e9\u8d39\u7528\u79cd\u7c7b"},A.a.createElement(B,{value:"\u8f66\u8f86"},"\u8f66\u8f86"),A.a.createElement(B,{value:"\u8017\u6750"},"\u8017\u6750"),A.a.createElement(B,{value:"\u9910\u996e\u8d39"},"\u9910\u996e\u8d39"),A.a.createElement(B,{value:"\u4f4f\u5bbf\u8d39"},"\u4f4f\u5bbf\u8d39"),A.a.createElement(B,{value:"\u5916\u8058\u52b3\u52a1"},"\u4ea4\u901a\u8d39"),A.a.createElement(B,{value:"\u4eea\u5668\u8bbe\u5907"},"\u4eea\u5668\u8bbe\u5907"),A.a.createElement(B,{value:"\u836f\u54c1\u8bd5\u5242"},"\u836f\u54c1\u8bd5\u5242"),A.a.createElement(B,{value:"\u4ea4\u901a\u8d39"},"\u4ea4\u901a\u8d39"),A.a.createElement(B,{value:"\u90ae\u5bc4\u8d39"},"\u90ae\u5bc4\u8d39"),A.a.createElement(B,{value:"\u8bef\u652f\u8d39"},"\u8bef\u652f\u8d39"),A.a.createElement(B,{value:"\u5176\u4ed6\u8d39"},"\u5176\u4ed6\u8d39")))),A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u8d39\u7528\u540d\u79f0"},t.getFieldDecorator("costname",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d39\u7528\u540d\u79f0"}]})(A.a.createElement(V["a"],{placeholder:"\u8bf7\u8f93\u5165\u8d39\u7528\u540d\u79f0"}))),A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u53d1\u751f/\u4f7f\u7528\u65e5\u671f"},t.getFieldDecorator("occurdate",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u53d1\u751f\u65e5\u671f"}]})(A.a.createElement(k["a"],{style:{width:"100%"},format:"YYYY-MM-DD",placeholder:"\u9009\u62e9\u7533\u8bf7\u65e5\u671f"}))),A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u63a5\u6536/\u4f7f\u7528\u4eba"},t.getFieldDecorator("reciever",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u6536\u4eba"}]})(A.a.createElement(V["a"],{placeholder:"\u8bf7\u8f93\u5165\u63a5\u6536\u4eba"}))),A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u91d1\u989d"},t.getFieldDecorator("costmoney",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u91d1\u989d"}]})(A.a.createElement(V["a"],{placeholder:"\u8bf7\u8f93\u5165\u91d1\u989d"}))),A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u6570\u91cf"},t.getFieldDecorator("amout",{rules:[{message:"\u8bf7\u8f93\u5165\u6570\u91cf"}]})(A.a.createElement(V["a"],{placeholder:"\u8bf7\u8f93\u5165\u6570\u91cf"}))),A.a.createElement(Y["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u5907\u6ce8"},t.getFieldDecorator("remark",{})(A.a.createElement(V["a"],{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"})))))}),U=(l=Y["a"].create(),r=Object(q["connect"])(function(e){var a=e.charge,t=e.loading;return{charge:a,loading:t.models.charge}}),l(n=r((o=function(e){D()(t,e);var a=Q(t);function t(){var e;f()(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return e=a.call.apply(a,[this].concat(r)),e.state={modalVisible:!1,modalAddNewVisble:!1,CostItemData:{}},e.columns=[{title:"\u8d39\u7528\u540d\u79f0",dataIndex:"costname"},{title:"\u8d39\u7528\u79cd\u7c7b",dataIndex:"costtype"},{title:"\u53d1\u751f\u65e5\u671f",dataIndex:"occurdate",render:function(e){return A.a.createElement("span",null,L()(e).format("YYYY-MM-DD"))}},{title:"\u91d1\u989d",dataIndex:"costmoney"},{title:"\u63a5\u6536\u4eba",dataIndex:"reciever"},{title:"\u767b\u8bb0\u65e5\u671f",dataIndex:"registdate",render:function(e){return A.a.createElement("span",null,L()(e).format("YYYY-MM-DD"))}},{title:"\u767b\u8bb0\u4eba",dataIndex:"register"},{title:"\u72b6\u6001",dataIndex:"status"},{title:"\u64cd\u4f5c",render:function(a,t){return A.a.createElement(S["Fragment"],null,A.a.createElement("a",{onClick:function(){return e.handleAddUpdateCost(a,!0)}},"\u4fee\u6539"),"\xa0\xa0",A.a.createElement("a",{onClick:function(){return e.deleteItem(a,t)}},"\u5220\u9664"))}}],e.previewItem=function(e){sessionStorage.setItem("reportNoForCostEdit",e.reportno),localStorage.setItem("reportDetailNo",e.reportno),O.a.push({pathname:"/Entrustment/DetailForEntrustment"})},e.deleteItem=function(a){var t=e.props.dispatch,l=E()({},a);t({type:"charge/deleteCostFetch",payload:l,callback:function(e){"success"===e?M["a"].success("\u5220\u9664\u6210\u529f"):M["a"].success("\u5220\u9664\u5931\u8d25")}}),e.init()},e.handleModalVisible=function(a){e.setState({modalVisible:!!a})},e.handleAddUpdateCost=function(a,t){e.handleModalVisible(t),e.setState({CostItemData:a})},e.handleModalAddNewVisible=function(a){e.setState({modalAddNewVisble:!!a})},e.handleFormReset=function(){var a=e.props.form;a.resetFields(),e.init()},e.init=function(){var a=sessionStorage.getItem("reportNoForCostEdit"),t=e.props.dispatch,l={reportNo:a};t({type:"charge/getCostInfosFetch",payload:l})},e.handleSearch=function(a){a.preventDefault();var t=e.props,l=t.dispatch,r=t.form,n=sessionStorage.getItem("reportNoForCostEdit");r.validateFields(function(e,a){if(!e){var t={reportNo:n,kind:a.kind,value:a.value};l({type:"charge/getCostInfosFetch",payload:t})}})},e.back=function(){e.props.history.goBack()},e}return v()(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return A.a.createElement(Y["a"],{onSubmit:this.handleSearch,layout:"inline"},A.a.createElement(i["a"],{gutter:{md:8,lg:24,xl:48}},A.a.createElement(u["a"],{md:4,sm:20},A.a.createElement(Y["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("kind",{rules:[{message:"\u641c\u7d22\u7c7b\u578b"}]})(A.a.createElement(N["a"],{placeholder:"\u641c\u7d22\u7c7b\u578b"},A.a.createElement(B,{value:"costname"},"\u8d39\u7528\u540d\u79f0"),A.a.createElement(B,{value:"costtype"},"\u8d39\u7528\u79cd\u7c7b"),A.a.createElement(B,{value:"reciever"},"\u63a5\u6536\u4eba"),A.a.createElement(B,{value:"register"},"\u767b\u8bb0\u4eba"),A.a.createElement(B,{value:"status"},"\u72b6\u6001"))))),A.a.createElement(u["a"],{md:6,sm:20},A.a.createElement(j,null,e("value",{rules:[{message:"\u641c\u7d22\u6570\u636e"}]})(A.a.createElement(V["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),A.a.createElement(u["a"],{md:8,sm:20},A.a.createElement("span",{className:P.a.submitButtons},A.a.createElement(d["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),A.a.createElement(d["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),A.a.createElement(d["a"],{style:{marginLeft:8},type:"primary",htmlType:"submit",onClick:this.handleModalAddNewVisible},"\u65b0\u5efa"),A.a.createElement(d["a"],{type:"primary",style:{marginLeft:8},onClick:this.back},A.a.createElement(m["a"],{type:"left"}),"\u8fd4\u56de")))))}},{key:"render",value:function(){var e=this.props,a=e.charge.costInfoData,t=e.loading,l=e.dispatch,r=this.state,n=r.modalAddNewVisble,o=r.modalVisible,i=r.CostItemData,m=JSON.parse(sessionStorage.getItem("reportinfoCost")),d={reportno:m.reportno,applicant:m.applicant,shipname:m.shipname,inspway:m.inspway};return A.a.createElement(J["a"],{text:d,title:"\u6210\u672c\u652f\u51fa"},A.a.createElement(c["a"],{bordered:!1,size:"small"},A.a.createElement("div",{className:P.a.tableList},A.a.createElement("div",{className:P.a.tableListForm},this.renderSimpleForm()),A.a.createElement(s["a"],{size:"middle",loading:t,dataSource:a,rowKey:"keyno",pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns}))),A.a.createElement(H,{modalAddNewVisble:n,handleModalAddNewVisible:this.handleModalAddNewVisible,dispatch:l,init:this.init}),A.a.createElement(K,{modalVisible:o,handleModalVisible:this.handleModalVisible,CostItemData:i,dispatch:l,init:this.init}))}}]),t}(S["PureComponent"]),n=o))||n)||n);a["default"]=U}}]);