(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[31],{Yx7T:function(e,a,t){"use strict";t.r(a);var l,r,n,o,c=t("jehZ"),i=t.n(c),s=(t("IzEo"),t("bx4M")),m=(t("g9YV"),t("wCAj")),d=(t("14J3"),t("BMrR")),p=(t("Pwec"),t("CtXQ")),u=(t("jCWc"),t("kPKH")),h=t("p0pE"),E=t.n(h),f=t("2Taf"),v=t.n(f),b=t("vZ4D"),g=t.n(b),y=t("l4Ni"),C=t.n(y),I=t("ujKo"),w=t.n(I),D=t("MhPg"),V=t.n(D),k=(t("O3gP"),t("lrIw")),F=(t("iQDF"),t("+eQT")),M=(t("5NDa"),t("5rEg")),S=(t("miYZ"),t("tsqr")),N=(t("2qtc"),t("kLXV")),Y=(t("bP8k"),t("gFTJ")),R=(t("+L6B"),t("2/Rp")),O=(t("OaEy"),t("2fM7")),A=(t("y8nQ"),t("Vl3Y")),x=t("q1tI"),q=t.n(x),J=t("MuoO"),L=t("wd/R"),P=t.n(L),T=t("zHco"),j=t("glGN"),z=t.n(j);function B(e){return function(){var a,t=w()(e);if(Q()){var l=w()(this).constructor;a=Reflect.construct(t,arguments,l)}else a=t.apply(this,arguments);return C()(this,a)}}function Q(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var K=A["a"].Item,Z=O["a"].Option,H=function(e){var a=e.modalReviewVisible,t=e.handleModalReviewVisible,l=e.modalInfo,r=function(e){return void 0!==e&&null!==e?q.a.createElement("span",null,P()(e).format("YYYY-MM-DD")):null};return q.a.createElement(N["a"],{destroyOnClose:!0,title:"\u67e5\u770b\u6210\u672c\u8be6\u60c5",visible:a,width:800,style:{top:100},onCancel:function(){return t()},footer:[q.a.createElement(R["a"],{type:"primary",onClick:function(){return t()}},"\u5173\u95ed")]},q.a.createElement(Y["a"],{bordered:!0},q.a.createElement(Y["a"].Item,{label:"\u8d39\u7528\u540d\u79f0"},l.costname),q.a.createElement(Y["a"].Item,{label:"\u91d1\u989d"},l.costmoney),q.a.createElement(Y["a"].Item,{label:"\u6570\u91cf"},l.amout),q.a.createElement(Y["a"].Item,{label:"\u53d1\u751f\u65e5\u671f"},r(l.occurdate)),q.a.createElement(Y["a"].Item,{label:"\u8d39\u7528\u79cd\u7c7b"},l.costtype),q.a.createElement(Y["a"].Item,{label:"\u767b\u8bb0\u65e5\u671f"},r(l.registdate)),q.a.createElement(Y["a"].Item,{label:"\u767b\u8bb0\u4eba"},l.register),q.a.createElement(Y["a"].Item,{label:"\u72b6\u6001"},l.status),q.a.createElement(Y["a"].Item,{label:"\u5907\u6ce8"},l.remark),q.a.createElement(Y["a"].Item,{label:"\u63a5\u53d7\u4eba"},l.reciever)))},U=A["a"].create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleModalVisible,r=e.CostItemData,n=e.dispatch,o=e.init,c=e.applicantOptions,i=e.handleApplicantSearch,s=function(){t.validateFields(function(e,a){if(!e){var t=r;t.amout=a.amout,t.costmoney=a.costmoney,t.costname=a.costname,t.costtype=a.costtype,t.occurdate=a.occurdate,t.reciever=a.reciever,t.remark=a.remark,n({type:"charge/updateCostFetch",payload:t,callback:function(e){"success"===e?S["a"].success("\u4fee\u6539\u6210\u529f"):S["a"].success("\u4fee\u6539\u5931\u8d25")}}),l(),o()}})};return q.a.createElement(N["a"],{destroyOnClose:!0,title:"\u4fee\u6539\u6210\u672c",visible:a,onOk:s,onCancel:function(){return l()},width:500,style:{top:100}},q.a.createElement(A["a"],null,q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u8d39\u7528\u79cd\u7c7b"},t.getFieldDecorator("costtype",{initialValue:r.costtype,rules:[{required:!0,message:"\u9009\u62e9\u8d39\u7528\u79cd\u7c7b"}]})(q.a.createElement(O["a"],{placeholder:"\u8bf7\u9009\u62e9\u8d39\u7528\u79cd\u7c7b"},q.a.createElement(Z,{value:"\u9910\u996e\u8d39"},"\u9910\u996e\u8d39"),q.a.createElement(Z,{value:"\u4ea4\u901a\u8d39"},"\u4ea4\u901a\u8d39"),q.a.createElement(Z,{value:"\u4f4f\u5bbf\u8d39"},"\u4f4f\u5bbf\u8d39"),q.a.createElement(Z,{value:"\u90ae\u5bc4\u8d39"},"\u90ae\u5bc4\u8d39"),q.a.createElement(Z,{value:"\u5dee\u65c5\u8d39"},"\u5dee\u65c5\u8d39"),q.a.createElement(Z,{value:"\u5916\u8058\u52b3\u52a1"},"\u5916\u8058\u52b3\u52a1"),q.a.createElement(Z,{value:"\u8f66\u8f86"},"\u8f66\u8f86"),q.a.createElement(Z,{value:"\u8017\u6750"},"\u8017\u6750"),q.a.createElement(Z,{value:"\u8bd5\u5242"},"\u8017\u6750"),q.a.createElement(Z,{value:"\u4eea\u5668\u8bbe\u5907"},"\u4eea\u5668\u8bbe\u5907"),q.a.createElement(Z,{value:"\u836f\u54c1\u8bd5\u5242"},"\u836f\u54c1\u8bd5\u5242"),q.a.createElement(Z,{value:"\u8bef\u9910\u8d39"},"\u8bef\u9910\u8d39"),q.a.createElement(Z,{value:"\u5176\u4ed6\u8d39"},"\u5176\u4ed6\u8d39")))),q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u8d39\u7528\u540d\u79f0"},t.getFieldDecorator("costname",{initialValue:r.costname,rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d39\u7528\u540d\u79f0"}]})(q.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u8d39\u7528\u540d\u79f0"}))),q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u53d1\u751f/\u4f7f\u7528\u65e5\u671f"},t.getFieldDecorator("occurdate",{initialValue:void 0===r.occurdate||null!==r.occurdate?P()(r.occurdate,"YYYY-MM-DD"):{},rules:[{required:!0,message:"\u8bf7\u586b\u5199\u53d1\u751f\u65e5\u671f"}]})(q.a.createElement(F["a"],{style:{width:"100%"},format:"YYYY-MM-DD",placeholder:"\u9009\u62e9\u7533\u8bf7\u65e5\u671f"}))),q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u63a5\u6536/\u4f7f\u7528\u4eba"},t.getFieldDecorator("reciever",{initialValue:r.reciever,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u6536\u4eba"}]})(q.a.createElement(k["a"],{className:"global-search",dataSource:c,onSearch:i,placeholder:"\u8bf7\u8f93\u5165\u63a5\u6536\u4eba"},q.a.createElement(M["a"],null)))),q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u91d1\u989d"},t.getFieldDecorator("costmoney",{initialValue:r.costmoney,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u91d1\u989d"}]})(q.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u91d1\u989d"}))),q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u6570\u91cf"},t.getFieldDecorator("amout",{initialValue:r.amout,rules:[{message:"\u8bf7\u8f93\u5165\u6570\u91cf"}]})(q.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u6570\u91cf"}))),q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u5907\u6ce8"},t.getFieldDecorator("remark",{initialValue:r.remark})(q.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"})))))}),X=A["a"].create()(function(e){var a=e.modalAddNewVisble,t=e.form,l=e.handleModalAddNewVisible,r=e.dispatch,n=e.init,o=e.applicantOptions,c=e.handleApplicantSearch,i=sessionStorage.getItem("reportNoForCostEdit"),s=JSON.parse(localStorage.getItem("userinfo")),m=function(){t.validateFields(function(e,a){if(!e){var t={amout:a.amout,costmoney:a.costmoney,costname:a.costname,costtype:a.costtype,occurdate:a.occurdate,reciever:a.reciever,remark:a.remark,register:s.nameC,reportno:i,status:"\u5df2\u767b\u8bb0"};r({type:"charge/addCostFetch",payload:t,callback:function(e){"success"===e?S["a"].success("\u8be5\u6210\u672c\u5df2\u7ecf\u52a0\u5165\uff01"):S["a"].success("\u8be5\u6210\u672c\u6dfb\u52a0\u5931\u8d25\uff01")}}),l(),n()}})};return q.a.createElement(N["a"],{destroyOnClose:!0,title:"\u65b0\u589e\u652f\u51fa",visible:a,onOk:m,onCancel:function(){return l()},width:500,style:{top:10}},q.a.createElement(A["a"],null,q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u8d39\u7528\u79cd\u7c7b"},t.getFieldDecorator("costtype",{rules:[{required:!0,message:"\u9009\u62e9\u8d39\u7528\u79cd\u7c7b"}]})(q.a.createElement(O["a"],{placeholder:"\u8bf7\u9009\u62e9\u8d39\u7528\u79cd\u7c7b"},q.a.createElement(Z,{value:"\u9910\u996e\u8d39"},"\u9910\u996e\u8d39"),q.a.createElement(Z,{value:"\u4ea4\u901a\u8d39"},"\u4ea4\u901a\u8d39"),q.a.createElement(Z,{value:"\u4f4f\u5bbf\u8d39"},"\u4f4f\u5bbf\u8d39"),q.a.createElement(Z,{value:"\u90ae\u5bc4\u8d39"},"\u90ae\u5bc4\u8d39"),q.a.createElement(Z,{value:"\u5dee\u65c5\u8d39"},"\u5dee\u65c5\u8d39"),q.a.createElement(Z,{value:"\u5916\u8058\u52b3\u52a1"},"\u5916\u8058\u52b3\u52a1"),q.a.createElement(Z,{value:"\u8f66\u8f86"},"\u8f66\u8f86"),q.a.createElement(Z,{value:"\u8017\u6750"},"\u8017\u6750"),q.a.createElement(Z,{value:"\u8bd5\u5242"},"\u8017\u6750"),q.a.createElement(Z,{value:"\u4eea\u5668\u8bbe\u5907"},"\u4eea\u5668\u8bbe\u5907"),q.a.createElement(Z,{value:"\u836f\u54c1\u8bd5\u5242"},"\u836f\u54c1\u8bd5\u5242"),q.a.createElement(Z,{value:"\u8bef\u9910\u8d39"},"\u8bef\u9910\u8d39"),q.a.createElement(Z,{value:"\u5176\u4ed6\u8d39"},"\u5176\u4ed6\u8d39")))),q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u8d39\u7528\u540d\u79f0"},t.getFieldDecorator("costname",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u8d39\u7528\u540d\u79f0"}]})(q.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u8d39\u7528\u540d\u79f0"}))),q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u53d1\u751f/\u4f7f\u7528\u65e5\u671f"},t.getFieldDecorator("occurdate",{rules:[{required:!0,message:"\u8bf7\u586b\u5199\u53d1\u751f\u65e5\u671f"}]})(q.a.createElement(F["a"],{style:{width:"100%"},format:"YYYY-MM-DD",placeholder:"\u9009\u62e9\u7533\u8bf7\u65e5\u671f"}))),q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u63a5\u6536/\u4f7f\u7528\u4eba"},t.getFieldDecorator("reciever",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a5\u6536\u4eba"}]})(q.a.createElement(k["a"],{className:"global-search",dataSource:o,onSearch:c,placeholder:"\u8bf7\u8f93\u5165\u63a5\u6536\u4eba"},q.a.createElement(M["a"],null)))),q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u91d1\u989d"},t.getFieldDecorator("costmoney",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u91d1\u989d"}]})(q.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u91d1\u989d"}))),q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u6570\u91cf"},t.getFieldDecorator("amout",{rules:[{message:"\u8bf7\u8f93\u5165\u6570\u91cf"}]})(q.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u6570\u91cf"}))),q.a.createElement(A["a"].Item,{labelCol:{span:6},wrapperCol:{span:16},label:"\u5907\u6ce8"},t.getFieldDecorator("remark",{})(q.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165\u5907\u6ce8"})))))}),G=(l=A["a"].create(),r=Object(J["connect"])(function(e){var a=e.charge,t=e.loading;return{charge:a,loading:t.models.charge}}),l(n=r((o=function(e){V()(t,e);var a=B(t);function t(){var e;v()(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return e=a.call.apply(a,[this].concat(r)),e.state={modalVisible:!1,modalAddNewVisble:!1,modalReviewVisible:!1,modalInfo:{},CostItemData:{},applicantName:[],role:!1},e.columns=[{title:"\u8d39\u7528\u540d\u79f0",dataIndex:"costname"},{title:"\u8d39\u7528\u79cd\u7c7b",dataIndex:"costtype"},{title:"\u53d1\u751f\u65e5\u671f",dataIndex:"occurdate",render:function(e){return q.a.createElement("span",null,P()(e).format("YYYY-MM-DD"))}},{title:"\u91d1\u989d",dataIndex:"costmoney"},{title:"\u63a5\u6536\u4eba",dataIndex:"reciever"},{title:"\u767b\u8bb0\u65e5\u671f",dataIndex:"registdate",render:function(e){return q.a.createElement("span",null,P()(e).format("YYYY-MM-DD"))}},{title:"\u767b\u8bb0\u4eba",dataIndex:"register"},{title:"\u5907\u6ce8",dataIndex:"remark"},{title:"\u72b6\u6001",dataIndex:"status"},{title:"\u64cd\u4f5c",render:function(a,t){return q.a.createElement(x["Fragment"],null,"\u5df2\u767b\u8bb0"===a.status?["\u7ee9\u6548"!==a.costtype&&"\u5206\u5305\u8d39"!==a.costtype||("\u7ee9\u6548"===a.costtype||"\u5206\u5305\u8d39"===a.costtype)&&!0===e.state.role?[q.a.createElement("a",{onClick:function(){return e.handleAddUpdateCost(a,!0)}},"\u4fee\u6539\xa0\xa0")]:[]]:[],"\u5df2\u767b\u8bb0"===a.status?["\u7ee9\u6548"!==a.costtype&&"\u5206\u5305\u8d39"!==a.costtype||("\u7ee9\u6548"===a.costtype||"\u5206\u5305\u8d39"===a.costtype)&&!0===e.state.role?[q.a.createElement("a",{onClick:function(){return e.deleteItem(a,!0)}},"\u5220\u9664\xa0\xa0")]:[]]:[],q.a.createElement("a",{onClick:function(){return e.handleReview(!0,a)}},"\u67e5\u770b\xa0\xa0"))}}],e.previewItem=function(e){sessionStorage.setItem("reportNoForCostEdit",e.reportno),localStorage.setItem("reportDetailNo",e.reportno),window.open("/Entrustment/DetailForEntrustment")},e.deleteItem=function(a){var t=e.props.dispatch,l=E()({},a);t({type:"charge/deleteCostFetch",payload:l,callback:function(e){"success"===e?S["a"].success("\u5220\u9664\u6210\u529f"):S["a"].success("\u5220\u9664\u5931\u8d25")}}),e.init()},e.handleModalVisible=function(a){e.setState({modalVisible:!!a})},e.handleAddUpdateCost=function(a,t){e.handleModalVisible(t),e.setState({CostItemData:a})},e.handleModalAddNewVisible=function(a){e.setState({modalAddNewVisble:!!a})},e.handleFormReset=function(){var a=e.props.form;a.resetFields(),e.init()},e.init=function(){var a=sessionStorage.getItem("reportNoForCostEdit"),t=e.props.dispatch,l={reportNo:a};t({type:"charge/getCostInfosFetch",payload:l})},e.handleSearch=function(a){a.preventDefault();var t=e.props,l=t.dispatch,r=t.form,n=sessionStorage.getItem("reportNoForCostEdit");r.validateFields(function(e,a){if(!e){var t={reportNo:n,kind:a.kind,value:a.value};l({type:"charge/getCostInfosFetch",payload:t})}})},e.handleApplicantSearch=function(a){var t=e.props.dispatch;t({type:"charge/getBusiness",payload:{name:a},callback:function(a){e.setState({applicantName:a})}})},e.back=function(){e.props.history.goBack()},e.handleReview=function(a,t){e.state.modalInfo=t,e.handleModalReviewVisible(a)},e.handleModalReviewVisible=function(a){e.setState({modalReviewVisible:!!a})},e}return g()(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("userinfo"));void 0!==e.role&&(-1===e.role.indexOf("\u603b\u7ecf\u7406")&&-1===e.role.indexOf("\u4e1a\u52a1\u526f\u603b")&&-1===e.role.indexOf("\u64cd\u4f5c\u7ecf\u7406")||(this.state.role=!0)),this.init()}},{key:"renderSimpleForm",value:function(){var e=this.props.form.getFieldDecorator;return q.a.createElement(A["a"],{onSubmit:this.handleSearch,layout:"inline"},q.a.createElement(d["a"],{gutter:{md:8,lg:24,xl:48}},q.a.createElement(u["a"],{md:4,sm:20},q.a.createElement(A["a"].Item,{labelCol:{span:5},wrapperCol:{span:6},colon:!1},e("kind",{rules:[{message:"\u641c\u7d22\u7c7b\u578b"}]})(q.a.createElement(O["a"],{placeholder:"\u641c\u7d22\u7c7b\u578b"},q.a.createElement(Z,{value:"costname"},"\u8d39\u7528\u540d\u79f0"),q.a.createElement(Z,{value:"costtype"},"\u8d39\u7528\u79cd\u7c7b"),q.a.createElement(Z,{value:"reciever"},"\u63a5\u6536\u4eba"),q.a.createElement(Z,{value:"register"},"\u767b\u8bb0\u4eba"),q.a.createElement(Z,{value:"status"},"\u72b6\u6001"))))),q.a.createElement(u["a"],{md:6,sm:20},q.a.createElement(K,null,e("value",{rules:[{message:"\u641c\u7d22\u6570\u636e"}]})(q.a.createElement(M["a"],{placeholder:"\u8bf7\u8f93\u5165"})))),q.a.createElement(u["a"],{md:8,sm:20},q.a.createElement("span",{className:z.a.submitButtons},q.a.createElement(R["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),q.a.createElement(R["a"],{style:{marginLeft:8},onClick:this.handleFormReset},"\u91cd\u7f6e"),q.a.createElement(R["a"],{style:{marginLeft:8},type:"primary",htmlType:"submit",onClick:this.handleModalAddNewVisible},"\u65b0\u5efa"),q.a.createElement(R["a"],{type:"primary",style:{marginLeft:8},onClick:this.back},q.a.createElement(p["a"],{type:"left"}),"\u8fd4\u56de")))))}},{key:"render",value:function(){var e=this.props,a=e.charge.costInfoData,t=e.loading,l=e.dispatch,r=this.state,n=r.modalAddNewVisble,o=r.modalVisible,c=r.CostItemData,d=r.modalReviewVisible,p=r.modalInfo,u=r.applicantName,h=JSON.parse(sessionStorage.getItem("reportinfoCost")),E={reportno:h.reportno,applicant:h.applicant,shipname:h.shipname,inspway:h.inspway},f={handleModalVisible:this.handleModalVisible,handleModalReviewVisible:this.handleModalReviewVisible,handleApplicantSearch:this.handleApplicantSearch},v=u.map(function(e){return q.a.createElement(Z,{key:e,value:e},e)});return q.a.createElement(T["a"],{text:E,title:"\u6210\u672c\u652f\u51fa"},q.a.createElement(s["a"],{bordered:!1,size:"small"},q.a.createElement("div",{className:z.a.tableList},q.a.createElement("div",{className:z.a.tableListForm},this.renderSimpleForm()),q.a.createElement(m["a"],{size:"middle",loading:t,dataSource:a,rowKey:"keyno",pagination:{showQuickJumper:!0,showSizeChanger:!0},columns:this.columns}))),q.a.createElement(H,i()({},f,{modalReviewVisible:d,modalInfo:p})),q.a.createElement(X,i()({},f,{applicantOptions:v,modalAddNewVisble:n,handleModalAddNewVisible:this.handleModalAddNewVisible,dispatch:l,init:this.init})),q.a.createElement(U,i()({},f,{applicantOptions:v,modalVisible:o,handleModalVisible:this.handleModalVisible,CostItemData:c,dispatch:l,init:this.init})))}}]),t}(x["PureComponent"]),n=o))||n)||n);a["default"]=G}}]);